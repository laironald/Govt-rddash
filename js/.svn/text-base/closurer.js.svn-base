(function(d){d.fn.tipTip=function(l){var k=d.extend({activation:"hover",keepAlive:false,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:false,enter:function(){},exit:function(){}},l);if(d("#tiptip_holder").length<=0){var q=d('<div id="tiptip_holder" style="max-width:'+k.maxWidth+';"></div>'),n=d('<div id="tiptip_content"></div>'),h=d('<div id="tiptip_arrow"></div>');d("body").append(q.html(n).prepend(h.html('<div id="tiptip_arrow_inner"></div>')))}else{q=
d("#tiptip_holder");n=d("#tiptip_content");h=d("#tiptip_arrow")}return this.each(function(){var s=d(this),z=k.content?k.content:s.attr(k.attribute);if(z!=""){k.content||s.removeAttr(k.attribute);var B=false;if(k.activation=="hover"){s.hover(function(){F()},function(){k.keepAlive||J()});k.keepAlive&&q.hover(function(){},function(){J()})}else if(k.activation=="focus")s.focus(function(){F()}).blur(function(){J()});else if(k.activation=="click"){s.click(function(){F();return false}).hover(function(){},
function(){k.keepAlive||J()});k.keepAlive&&q.hover(function(){},function(){J()})}var F=function(){k.enter.call(this);n.html(z);q.hide().removeAttr("class").css("margin","0");h.removeAttr("style");var M=parseInt(s.offset().top),A=parseInt(s.offset().left),L=parseInt(s.outerWidth()),Q=parseInt(s.outerHeight()),D=q.outerWidth(),S=q.outerHeight(),ia=Math.round((L-D)/2),fa=Math.round((Q-S)/2),w=Math.round(A+ia),V=Math.round(M+Q+k.edgeOffset),U="",ga="",ja=Math.round(D-12)/2;if(k.defaultPosition=="bottom")U=
"_bottom";else if(k.defaultPosition=="top")U="_top";else if(k.defaultPosition=="left")U="_left";else if(k.defaultPosition=="right")U="_right";var ba=ia+A<parseInt(d(window).scrollLeft()),da=D+A>parseInt(d(window).width());if(ba&&ia<0||U=="_right"&&!da||U=="_left"&&A<D+k.edgeOffset+5){U="_right";ga=Math.round(S-13)/2;ja=-12;w=Math.round(A+L+k.edgeOffset);V=Math.round(M+fa)}else if(da&&ia<0||U=="_left"&&!ba){U="_left";ga=Math.round(S-13)/2;ja=Math.round(D);w=Math.round(A-(D+k.edgeOffset+5));V=Math.round(M+
fa)}A=M+Q+k.edgeOffset+S+8>parseInt(d(window).height()+d(window).scrollTop());L=M+Q-(k.edgeOffset+S+8)<0;if(A||U=="_bottom"&&A||U=="_top"&&!L){if(U=="_top"||U=="_bottom")U="_top";else U+="_top";ga=S;V=Math.round(M-(S+5+k.edgeOffset))}else if(L|(U=="_top"&&L)||U=="_bottom"&&!A){if(U=="_top"||U=="_bottom")U="_bottom";else U+="_bottom";ga=-12;V=Math.round(M+Q+k.edgeOffset)}if(U=="_right_top"||U=="_left_top")V+=5;else if(U=="_right_bottom"||U=="_left_bottom")V-=5;if(U=="_left_top"||U=="_left_bottom")w+=
5;h.css({"margin-left":ja+"px","margin-top":ga+"px"});q.css({"margin-left":w+"px","margin-top":V+"px"}).attr("class","tip"+U);B&&clearTimeout(B);B=setTimeout(function(){q.stop(true,true).fadeIn(k.fadeIn)},k.delay)},J=function(){k.exit.call(this);B&&clearTimeout(B);q.fadeOut(k.fadeOut)}}})}})(jQuery);(function(){var d=this,l=d._,k={},q=Array.prototype,n=Object.prototype,h=q.slice,s=q.unshift,z=n.toString,B=n.hasOwnProperty,F=q.forEach,J=q.map,M=q.reduce,A=q.reduceRight,L=q.filter,Q=q.every,D=q.some,S=q.indexOf,ia=q.lastIndexOf;n=Array.isArray;var fa=Object.keys,w=function(o){return new ba(o)};if(typeof module!=="undefined"&&module.exports){module.exports=w;w._=w}else d._=w;w.VERSION="1.1.3";var V=w.each=w.forEach=function(o,u,E){if(F&&o.forEach===F)o.forEach(u,E);else if(w.isNumber(o.length))for(var H=
0,O=o.length;H<O;H++){if(u.call(E,o[H],H,o)===k)break}else for(H in o)if(B.call(o,H))if(u.call(E,o[H],H,o)===k)break};w.map=function(o,u,E){if(J&&o.map===J)return o.map(u,E);var H=[];V(o,function(O,R,Z){H[H.length]=u.call(E,O,R,Z)});return H};w.reduce=w.foldl=w.inject=function(o,u,E,H){var O=E!==void 0;if(M&&o.reduce===M){if(H)u=w.bind(u,H);return O?o.reduce(u,E):o.reduce(u)}V(o,function(R,Z,sa){E=!O&&Z===0?R:u.call(H,E,R,Z,sa)});return E};w.reduceRight=w.foldr=function(o,u,E,H){if(A&&o.reduceRight===
A){if(H)u=w.bind(u,H);return E!==void 0?o.reduceRight(u,E):o.reduceRight(u)}o=(w.isArray(o)?o.slice():w.toArray(o)).reverse();return w.reduce(o,u,E,H)};w.find=w.detect=function(o,u,E){var H;U(o,function(O,R,Z){if(u.call(E,O,R,Z)){H=O;return true}});return H};w.filter=w.select=function(o,u,E){if(L&&o.filter===L)return o.filter(u,E);var H=[];V(o,function(O,R,Z){if(u.call(E,O,R,Z))H[H.length]=O});return H};w.reject=function(o,u,E){var H=[];V(o,function(O,R,Z){u.call(E,O,R,Z)||(H[H.length]=O)});return H};
w.every=w.all=function(o,u,E){u=u||w.identity;if(Q&&o.every===Q)return o.every(u,E);var H=true;V(o,function(O,R,Z){if(!(H=H&&u.call(E,O,R,Z)))return k});return H};var U=w.some=w.any=function(o,u,E){u=u||w.identity;if(D&&o.some===D)return o.some(u,E);var H=false;V(o,function(O,R,Z){if(H=u.call(E,O,R,Z))return k});return H};w.include=w.contains=function(o,u){if(S&&o.indexOf===S)return o.indexOf(u)!=-1;var E=false;U(o,function(H){if(E=H===u)return true});return E};w.invoke=function(o,u){var E=h.call(arguments,
2);return w.map(o,function(H){return(u?H[u]:H).apply(H,E)})};w.pluck=function(o,u){return w.map(o,function(E){return E[u]})};w.max=function(o,u,E){if(!u&&w.isArray(o))return Math.max.apply(Math,o);var H={computed:-Infinity};V(o,function(O,R,Z){R=u?u.call(E,O,R,Z):O;R>=H.computed&&(H={value:O,computed:R})});return H.value};w.min=function(o,u,E){if(!u&&w.isArray(o))return Math.min.apply(Math,o);var H={computed:Infinity};V(o,function(O,R,Z){R=u?u.call(E,O,R,Z):O;R<H.computed&&(H={value:O,computed:R})});
return H.value};w.sortBy=function(o,u,E){return w.pluck(w.map(o,function(H,O,R){return{value:H,criteria:u.call(E,H,O,R)}}).sort(function(H,O){var R=H.criteria,Z=O.criteria;return R<Z?-1:R>Z?1:0}),"value")};w.sortedIndex=function(o,u,E){E=E||w.identity;for(var H=0,O=o.length;H<O;){var R=H+O>>1;E(o[R])<E(u)?H=R+1:O=R}return H};w.toArray=function(o){if(!o)return[];if(o.toArray)return o.toArray();if(w.isArray(o))return o;if(w.isArguments(o))return h.call(o);return w.values(o)};w.size=function(o){return w.toArray(o).length};
w.first=w.head=function(o,u,E){return u&&!E?h.call(o,0,u):o[0]};w.rest=w.tail=function(o,u,E){return h.call(o,w.isUndefined(u)||E?1:u)};w.last=function(o){return o[o.length-1]};w.compact=function(o){return w.filter(o,function(u){return!!u})};w.flatten=function(o){return w.reduce(o,function(u,E){if(w.isArray(E))return u.concat(w.flatten(E));u[u.length]=E;return u},[])};w.without=function(o){var u=h.call(arguments,1);return w.filter(o,function(E){return!w.include(u,E)})};w.uniq=w.unique=function(o,
u){return w.reduce(o,function(E,H,O){if(0==O||(u===true?w.last(E)!=H:!w.include(E,H)))E[E.length]=H;return E},[])};w.intersect=function(o){var u=h.call(arguments,1);return w.filter(w.uniq(o),function(E){return w.every(u,function(H){return w.indexOf(H,E)>=0})})};w.zip=function(){for(var o=h.call(arguments),u=w.max(w.pluck(o,"length")),E=Array(u),H=0;H<u;H++)E[H]=w.pluck(o,""+H);return E};w.indexOf=function(o,u){if(S&&o.indexOf===S)return o.indexOf(u);for(var E=0,H=o.length;E<H;E++)if(o[E]===u)return E;
return-1};w.lastIndexOf=function(o,u){if(ia&&o.lastIndexOf===ia)return o.lastIndexOf(u);for(var E=o.length;E--;)if(o[E]===u)return E;return-1};w.range=function(o,u,E){var H=h.call(arguments),O=H.length<=1;o=O?0:H[0];u=O?H[0]:H[1];E=H[2]||1;H=Math.max(Math.ceil((u-o)/E),0);O=0;for(var R=Array(H);O<H;){R[O++]=o;o+=E}return R};w.bind=function(o,u){var E=h.call(arguments,2);return function(){return o.apply(u||{},E.concat(h.call(arguments)))}};w.bindAll=function(o){var u=h.call(arguments,1);if(u.length==
0)u=w.functions(o);V(u,function(E){o[E]=w.bind(o[E],o)});return o};w.memoize=function(o,u){var E={};u=u||w.identity;return function(){var H=u.apply(this,arguments);return H in E?E[H]:E[H]=o.apply(this,arguments)}};w.delay=function(o,u){var E=h.call(arguments,2);return setTimeout(function(){return o.apply(o,E)},u)};w.defer=function(o){return w.delay.apply(w,[o,1].concat(h.call(arguments,1)))};var ga=function(o,u,E){var H;return function(){var O=this,R=arguments,Z=function(){H=null;o.apply(O,R)};E&&
clearTimeout(H);if(E||!H)H=setTimeout(Z,u)}};w.throttle=function(o,u){return ga(o,u,false)};w.debounce=function(o,u){return ga(o,u,true)};w.wrap=function(o,u){return function(){var E=[o].concat(h.call(arguments));return u.apply(u,E)}};w.compose=function(){var o=h.call(arguments);return function(){for(var u=h.call(arguments),E=o.length-1;E>=0;E--)u=[o[E].apply(this,u)];return u[0]}};w.keys=fa||function(o){if(w.isArray(o))return w.range(0,o.length);var u=[],E;for(E in o)if(B.call(o,E))u[u.length]=E;
return u};w.values=function(o){return w.map(o,w.identity)};w.functions=w.methods=function(o){return w.filter(w.keys(o),function(u){return w.isFunction(o[u])}).sort()};w.extend=function(o){V(h.call(arguments,1),function(u){for(var E in u)o[E]=u[E]});return o};w.clone=function(o){return w.isArray(o)?o.slice():w.extend({},o)};w.tap=function(o,u){u(o);return o};w.isEqual=function(o,u){if(o===u)return true;var E=typeof o;if(E!=typeof u)return false;if(o==u)return true;if(!o&&u||o&&!u)return false;if(o.isEqual)return o.isEqual(u);
if(w.isDate(o)&&w.isDate(u))return o.getTime()===u.getTime();if(w.isNaN(o)&&w.isNaN(u))return false;if(w.isRegExp(o)&&w.isRegExp(u))return o.source===u.source&&o.global===u.global&&o.ignoreCase===u.ignoreCase&&o.multiline===u.multiline;if(E!=="object")return false;if(o.length&&o.length!==u.length)return false;E=w.keys(o);var H=w.keys(u);if(E.length!=H.length)return false;for(var O in o)if(!(O in u)||!w.isEqual(o[O],u[O]))return false;return true};w.isEmpty=function(o){if(w.isArray(o)||w.isString(o))return o.length===
0;for(var u in o)if(B.call(o,u))return false;return true};w.isElement=function(o){return!!(o&&o.nodeType==1)};w.isArray=n||function(o){return!!(o&&o.concat&&o.unshift&&!o.callee)};w.isArguments=function(o){return!!(o&&o.callee)};w.isFunction=function(o){return!!(o&&o.constructor&&o.call&&o.apply)};w.isString=function(o){return!!(o===""||o&&o.charCodeAt&&o.substr)};w.isNumber=function(o){return!!(o===0||o&&o.toExponential&&o.toFixed)};w.isNaN=function(o){return z.call(o)==="[object Number]"&&isNaN(o)};
w.isBoolean=function(o){return o===true||o===false};w.isDate=function(o){return!!(o&&o.getTimezoneOffset&&o.setUTCFullYear)};w.isRegExp=function(o){return!!(o&&o.test&&o.exec&&(o.ignoreCase||o.ignoreCase===false))};w.isNull=function(o){return o===null};w.isUndefined=function(o){return o===void 0};w.noConflict=function(){d._=l;return this};w.identity=function(o){return o};w.times=function(o,u,E){for(var H=0;H<o;H++)u.call(E,H)};w.mixin=function(o){V(w.functions(o),function(u){ca(u,w[u]=o[u])})};var ja=
0;w.uniqueId=function(o){var u=ja++;return o?o+u:u};w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};w.template=function(o,u){var E=w.templateSettings;E="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+o.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(E.interpolate,function(H,O){return"',"+O.replace(/\\'/g,"'")+",'"}).replace(E.evaluate||null,function(H,O){return"');"+O.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,
"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";E=new Function("obj",E);return u?E(u):E};var ba=function(o){this._wrapped=o};w.prototype=ba.prototype;var da=function(o,u){return u?w(o).chain():o},ca=function(o,u){ba.prototype[o]=function(){var E=h.call(arguments);s.call(E,this._wrapped);return da(u.apply(w,E),this._chain)}};w.mixin(w);V(["pop","push","reverse","shift","sort","splice","unshift"],function(o){var u=q[o];ba.prototype[o]=function(){u.apply(this._wrapped,arguments);
return da(this._wrapped,this._chain)}});V(["concat","join","slice"],function(o){var u=q[o];ba.prototype[o]=function(){return da(u.apply(this._wrapped,arguments),this._chain)}});ba.prototype.chain=function(){this._chain=true;return this};ba.prototype.value=function(){return this._wrapped}})();(function(d,l){function k(q){return!d(q).parents().andSelf().filter(function(){return d.curCSS(this,"visibility")==="hidden"||d.expr.filters.hidden(this)}).length}d.ui=d.ui||{};if(!d.ui.version){d.extend(d.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,
NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});d.fn.extend({_focus:d.fn.focus,focus:function(q,n){return typeof q==="number"?this.each(function(){var h=this;setTimeout(function(){d(h).focus();n&&n.call(h)},q)}):this._focus.apply(this,arguments)},scrollParent:function(){var q;q=d.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(d.curCSS(this,
"position",1))&&/(auto|scroll)/.test(d.curCSS(this,"overflow",1)+d.curCSS(this,"overflow-y",1)+d.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(d.curCSS(this,"overflow",1)+d.curCSS(this,"overflow-y",1)+d.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!q.length?d(document):q},zIndex:function(q){if(q!==l)return this.css("zIndex",q);if(this.length){q=d(this[0]);for(var n;q.length&&q[0]!==document;){n=q.css("position");
if(n==="absolute"||n==="relative"||n==="fixed"){n=parseInt(q.css("zIndex"));if(!isNaN(n)&&n!=0)return n}q=q.parent()}}return 0},disableSelection:function(){return this.bind(d.support.selectstart?"selectstart":"mousedown.ui-disableSelection",function(q){q.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});d.each(["Width","Height"],function(q,n){function h(F,J,M,A){d.each(s,function(){J-=parseFloat(d.curCSS(F,"padding"+this,true))||0;if(M)J-=parseFloat(d.curCSS(F,
"border"+this+"Width",true))||0;if(A)J-=parseFloat(d.curCSS(F,"margin"+this,true))||0});return J}var s=n==="Width"?["Left","Right"]:["Top","Bottom"],z=n.toLowerCase(),B={innerWidth:d.fn.innerWidth,innerHeight:d.fn.innerHeight,outerWidth:d.fn.outerWidth,outerHeight:d.fn.outerHeight};d.fn["inner"+n]=function(F){if(F===l)return B["inner"+n].call(this);return this.each(function(){d.style(this,z,h(this,F)+"px")})};d.fn["outer"+n]=function(F,J){if(typeof F!=="number")return B["outer"+n].call(this,F);return this.each(function(){d.style(this,
z,h(this,F,true,J)+"px")})}});d.extend(d.expr[":"],{data:function(q,n,h){return!!d.data(q,h[3])},focusable:function(q){var n=q.nodeName.toLowerCase(),h=d.attr(q,"tabindex");if("area"===n){n=q.parentNode;h=n.name;if(!q.href||!h||n.nodeName.toLowerCase()!=="map")return false;q=d("img[usemap=#"+h+"]")[0];return!!q&&k(q)}return(/input|select|textarea|button|object/.test(n)?!q.disabled:"a"==n?q.href||!isNaN(h):!isNaN(h))&&k(q)},tabbable:function(q){var n=d.attr(q,"tabindex");return(isNaN(n)||n>=0)&&d(q).is(":focusable")}});
d(function(){var q=document.body,n=q.appendChild(n=document.createElement("div"));d.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});d.support.minHeight=n.offsetHeight===100;d.support.selectstart="onselectstart"in n;q.removeChild(n).style.display="none"});d.extend(d.ui,{plugin:{add:function(q,n,h){q=d.ui[q].prototype;for(var s in h){q.plugins[s]=q.plugins[s]||[];q.plugins[s].push([n,h[s]])}},call:function(q,n,h){if((n=q.plugins[n])&&q.element[0].parentNode)for(var s=0;s<n.length;s++)q.options[n[s][0]]&&
n[s][1].apply(q.element,h)}},contains:function(q,n){return document.compareDocumentPosition?q.compareDocumentPosition(n)&16:q!==n&&q.contains(n)},hasScroll:function(q,n){if(d(q).css("overflow")==="hidden")return false;var h=n&&n==="left"?"scrollLeft":"scrollTop",s=false;if(q[h]>0)return true;q[h]=1;s=q[h]>0;q[h]=0;return s},isOverAxis:function(q,n,h){return q>n&&q<n+h},isOver:function(q,n,h,s,z,B){return d.ui.isOverAxis(q,h,z)&&d.ui.isOverAxis(n,s,B)}})}})(jQuery);(function(d,l){if(d.cleanData){var k=d.cleanData;d.cleanData=function(n){for(var h=0,s;(s=n[h])!=null;h++)d(s).triggerHandler("remove");k(n)}}else{var q=d.fn.remove;d.fn.remove=function(n,h){return this.each(function(){if(!h)if(!n||d.filter(n,[this]).length)d("*",this).add([this]).each(function(){d(this).triggerHandler("remove")});return q.call(d(this),n,h)})}}d.widget=function(n,h,s){var z=n.split(".")[0],B;n=n.split(".")[1];B=z+"-"+n;if(!s){s=h;h=d.Widget}d.expr[":"][B]=function(F){return!!d.data(F,
n)};d[z]=d[z]||{};d[z][n]=function(F,J){arguments.length&&this._createWidget(F,J)};h=new h;h.options=d.extend(true,{},h.options);d[z][n].prototype=d.extend(true,h,{namespace:z,widgetName:n,widgetEventPrefix:d[z][n].prototype.widgetEventPrefix||n,widgetBaseClass:B},s);d.widget.bridge(n,d[z][n])};d.widget.bridge=function(n,h){d.fn[n]=function(s){var z=typeof s==="string",B=Array.prototype.slice.call(arguments,1),F=this;s=!z&&B.length?d.extend.apply(null,[true,s].concat(B)):s;if(z&&s.charAt(0)==="_")return F;
z?this.each(function(){var J=d.data(this,n);if(!J)throw"cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'";if(!d.isFunction(J[s]))throw"no such method '"+s+"' for "+n+" widget instance";var M=J[s].apply(J,B);if(M!==J&&M!==l){F=M;return false}}):this.each(function(){var J=d.data(this,n);J?J.option(s||{})._init():d.data(this,n,new h(s,this))});return F}};d.Widget=function(n,h){arguments.length&&this._createWidget(n,h)};d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",
options:{disabled:false},_createWidget:function(n,h){d.data(h,this.widgetName,this);this.element=d(h);this.options=d.extend(true,{},this.options,d.metadata&&d.metadata.get(h)[this.widgetName],n);var s=this;this.element.bind("remove."+this.widgetName,function(){s.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(n,h){var s=n;if(arguments.length===0)return d.extend({},this.options);if(typeof n==="string"){if(h===l)return this.options[n];s={};s[n]=h}this._setOptions(s);return this},_setOptions:function(n){var h=this;d.each(n,function(s,z){h._setOption(s,z)});return this},_setOption:function(n,h){this.options[n]=h;if(n==="disabled")this.widget()[h?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
h);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(n,h,s){var z=this.options[n];h=d.Event(h);h.type=(n===this.widgetEventPrefix?n:this.widgetEventPrefix+n).toLowerCase();s=s||{};if(h.originalEvent){n=d.event.props.length;for(var B;n;){B=d.event.props[--n];h[B]=h.originalEvent[B]}}this.element.trigger(h,s);return!(d.isFunction(z)&&z.call(this.element[0],h,s)===false||h.isDefaultPrevented())}}})(jQuery);(function(d){d.ui=d.ui||{};var l=/left|center|right/,k=/top|center|bottom/,q=d.fn.position,n=d.fn.offset;d.fn.position=function(h){if(!h||!h.of)return q.apply(this,arguments);h=d.extend({},h);var s=d(h.of),z=s[0],B=(h.collision||"flip").split(" "),F=h.offset?h.offset.split(" "):[0,0],J,M,A;if(z.nodeType===9){J=s.width();M=s.height();A={top:0,left:0}}else if(z.scrollTo&&z.document){J=s.width();M=s.height();A={top:s.scrollTop(),left:s.scrollLeft()}}else if(z.preventDefault){h.at="left top";J=M=0;A=
{top:h.of.pageY,left:h.of.pageX}}else{J=s.outerWidth();M=s.outerHeight();A=s.offset()}d.each(["my","at"],function(){var L=(h[this]||"").split(" ");if(L.length===1)L=l.test(L[0])?L.concat(["center"]):k.test(L[0])?["center"].concat(L):["center","center"];L[0]=l.test(L[0])?L[0]:"center";L[1]=k.test(L[1])?L[1]:"center";h[this]=L});if(B.length===1)B[1]=B[0];F[0]=parseInt(F[0],10)||0;if(F.length===1)F[1]=F[0];F[1]=parseInt(F[1],10)||0;if(h.at[0]==="right")A.left+=J;else if(h.at[0]==="center")A.left+=J/
2;if(h.at[1]==="bottom")A.top+=M;else if(h.at[1]==="center")A.top+=M/2;A.left+=F[0];A.top+=F[1];return this.each(function(){var L=d(this),Q=L.outerWidth(),D=L.outerHeight(),S=parseInt(d.curCSS(this,"marginLeft",true))||0,ia=parseInt(d.curCSS(this,"marginTop",true))||0,fa=Q+S+parseInt(d.curCSS(this,"marginRight",true))||0,w=D+ia+parseInt(d.curCSS(this,"marginBottom",true))||0,V=d.extend({},A),U;if(h.my[0]==="right")V.left-=Q;else if(h.my[0]==="center")V.left-=Q/2;if(h.my[1]==="bottom")V.top-=D;else if(h.my[1]===
"center")V.top-=D/2;V.left=parseInt(V.left);V.top=parseInt(V.top);U={left:V.left-S,top:V.top-ia};d.each(["left","top"],function(ga,ja){d.ui.position[B[ga]]&&d.ui.position[B[ga]][ja](V,{targetWidth:J,targetHeight:M,elemWidth:Q,elemHeight:D,collisionPosition:U,collisionWidth:fa,collisionHeight:w,offset:F,my:h.my,at:h.at})});d.fn.bgiframe&&L.bgiframe();L.offset(d.extend(V,{using:h.using}))})};d.ui.position={fit:{left:function(h,s){var z=d(window);z=s.collisionPosition.left+s.collisionWidth-z.width()-
z.scrollLeft();h.left=z>0?h.left-z:Math.max(h.left-s.collisionPosition.left,h.left)},top:function(h,s){var z=d(window);z=s.collisionPosition.top+s.collisionHeight-z.height()-z.scrollTop();h.top=z>0?h.top-z:Math.max(h.top-s.collisionPosition.top,h.top)}},flip:{left:function(h,s){if(s.at[0]!=="center"){var z=d(window);z=s.collisionPosition.left+s.collisionWidth-z.width()-z.scrollLeft();var B=s.my[0]==="left"?-s.elemWidth:s.my[0]==="right"?s.elemWidth:0,F=s.at[0]==="left"?s.targetWidth:-s.targetWidth,
J=-2*s.offset[0];h.left+=s.collisionPosition.left<0?B+F+J:z>0?B+F+J:0}},top:function(h,s){if(s.at[1]!=="center"){var z=d(window);z=s.collisionPosition.top+s.collisionHeight-z.height()-z.scrollTop();var B=s.my[1]==="top"?-s.elemHeight:s.my[1]==="bottom"?s.elemHeight:0,F=s.at[1]==="top"?s.targetHeight:-s.targetHeight,J=-2*s.offset[1];h.top+=s.collisionPosition.top<0?B+F+J:z>0?B+F+J:0}}}};if(!d.offset.setOffset){d.offset.setOffset=function(h,s){if(/static/.test(d.curCSS(h,"position")))h.style.position=
"relative";var z=d(h),B=z.offset(),F=parseInt(d.curCSS(h,"top",true),10)||0,J=parseInt(d.curCSS(h,"left",true),10)||0;B={top:s.top-B.top+F,left:s.left-B.left+J};"using"in s?s.using.call(h,B):z.css(B)};d.fn.offset=function(h){var s=this[0];if(!s||!s.ownerDocument)return null;if(h)return this.each(function(){d.offset.setOffset(this,h)});return n.call(this)}}})(jQuery);(function(d){d.widget("ui.selectmenu",{getter:"value",version:"1.8",eventPrefix:"selectmenu",options:{transferClasses:true,style:"popup",width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,bgImage:function(){}},_create:function(){var l=this,k=this.options,q=this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10);this.ids=[q+"-button",q+"-menu"];this._safemouseup=true;this.newelement=d('<a class="'+this.widgetBaseClass+' ui-widget ui-state-default ui-corner-all" id="'+
this.ids[0]+'" role="button" href="#" aria-haspopup="true" aria-owns="'+this.ids[1]+'"></a>').insertAfter(this.element);(q=this.element.attr("tabindex"))&&this.newelement.attr("tabindex",q);this.newelement.data("selectelement",this.element);this.selectmenuIcon=d('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement).addClass(k.style=="popup"?"ui-icon-triangle-2-n-s":"ui-icon-triangle-1-s");d("label[for="+this.element.attr("id")+"]").attr("for",this.ids[0]).bind("click",
function(){l.newelement[0].focus();return false});this.newelement.bind("mousedown",function(F){l._toggle(F);if(k.style=="popup"){l._safemouseup=false;setTimeout(function(){l._safemouseup=true},300)}return false}).bind("click",function(){return false}).keydown(function(F){var J=true;switch(F.keyCode){case d.ui.keyCode.ENTER:J=true;break;case d.ui.keyCode.SPACE:J=false;l._toggle(F);break;case d.ui.keyCode.UP:case d.ui.keyCode.LEFT:J=false;l._moveSelection(-1);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.RIGHT:J=
false;l._moveSelection(1);break;case d.ui.keyCode.TAB:J=true;break;default:J=false;l._typeAhead(F.keyCode,"mouseup")}return J}).bind("mouseover focus",function(){k.disabled||d(this).addClass(l.widgetBaseClass+"-focus ui-state-hover")}).bind("mouseout blur",function(){k.disabled||d(this).removeClass(l.widgetBaseClass+"-focus ui-state-hover")});d(document).mousedown(function(F){l.close(F)});this.element.click(function(){this._refreshValue()}).focus(function(){this.newelement&&this.newelement[0].focus()});
this.list=d('<ul class="'+l.widgetBaseClass+"-menu ui-widget ui-widget-content"+(k.style=="dropdown"?" ui-corner-bottom":" ui-corner-all")+'" aria-hidden="true" role="listbox" aria-labelledby="'+this.ids[0]+'" id="'+this.ids[1]+'"></ul>').appendTo("body");var n=[];this.element.find("option").each(function(){n.push({value:d(this).attr("value"),text:l._formatText(jQuery(this).text()),selected:d(this).attr("selected"),classes:d(this).attr("class"),parentOptGroup:d(this).parent("optgroup").attr("label"),
bgImage:k.bgImage.call(d(this))})});var h=l.options.style=="popup"?" ui-state-active":"";for(q=0;q<n.length;q++){var s=d('<li role="presentation"><a href="#" tabindex="-1" role="option" aria-selected="false">'+n[q].text+"</a></li>").data("index",q).addClass(n[q].classes).data("optionClasses",n[q].classes||"").mouseup(function(F){if(l._safemouseup){var J=d(this).data("index")!=l._selectedIndex();l.value(d(this).data("index"));l.select(F);J&&l.change(F);l.close(F,true)}return false}).click(function(){return false}).bind("mouseover focus",
function(){l._selectedOptionLi().addClass(h);l._focusedOptionLi().removeClass(l.widgetBaseClass+"-item-focus ui-state-hover");d(this).removeClass("ui-state-active").addClass(l.widgetBaseClass+"-item-focus ui-state-hover")}).bind("mouseout blur",function(){d(this).is(l._selectedOptionLi())&&d(this).addClass(h);d(this).removeClass(l.widgetBaseClass+"-item-focus ui-state-hover")});if(n[q].parentOptGroup){var z=l.widgetBaseClass+"-group-"+n[q].parentOptGroup.replace(/[^a-zA-Z0-9]/g,"");this.list.find("li."+
z).size()?this.list.find("li."+z+":last ul").append(s):d('<li role="presentation" class="'+l.widgetBaseClass+"-group "+z+'"><span class="'+l.widgetBaseClass+'-group-label">'+n[q].parentOptGroup+"</span><ul></ul></li>").appendTo(this.list).find("ul").append(s)}else s.appendTo(this.list);this.list.bind("mousedown mouseup",function(){return false});if(k.icons)for(var B in k.icons)if(s.is(k.icons[B].find)){s.data("optionClasses",n[q].classes+" "+l.widgetBaseClass+"-hasIcon").addClass(l.widgetBaseClass+
"-hasIcon");z=k.icons[B].icon||"";s.find("a:eq(0)").prepend('<span class="'+l.widgetBaseClass+"-item-icon ui-icon "+z+'"></span>');n[q].bgImage&&s.find("span").css("background-image",n[q].bgImage)}}this.list.find("li:last").addClass("ui-corner-bottom");k.style=="popup"&&this.list.find("li:first").addClass("ui-corner-top");if(k.transferClasses){B=this.element.attr("class")||"";this.newelement.add(this.list).addClass(B)}B=this.element.width();this.newelement.width(k.width?k.width:B);k.style=="dropdown"?
this.list.width(k.menuWidth?k.menuWidth:k.width?k.width:B):this.list.width(k.menuWidth?k.menuWidth:k.width?k.width-k.handleWidth:B-k.handleWidth);k.maxHeight&&k.maxHeight<this.list.height()&&this.list.height(k.maxHeight);this._optionLis=this.list.find("li:not(."+l.widgetBaseClass+"-group)");this.list.keydown(function(F){var J=true;switch(F.keyCode){case d.ui.keyCode.HOME:J=false;l._moveFocus(":first");break;case d.ui.keyCode.PAGE_UP:J=false;l._scrollPage("up");break;case d.ui.keyCode.PAGE_DOWN:J=
false;l._scrollPage("down");break;case d.ui.keyCode.END:J=false;l._moveFocus(":last");break;case d.ui.keyCode.ENTER:case d.ui.keyCode.SPACE:J=false;l.close(F,true);d(F.target).parents("li:eq(0)").trigger("mouseup");break;case d.ui.keyCode.TAB:J=true;l.close(F,true);break;case d.ui.keyCode.ESCAPE:J=false;l.close(F,true)}return J});if(k.style=="dropdown"){this.newelement.addClass(l.widgetBaseClass+"-dropdown");this.list.addClass(l.widgetBaseClass+"-menu-dropdown")}else{this.newelement.addClass(l.widgetBaseClass+
"-popup");this.list.addClass(l.widgetBaseClass+"-menu-popup")}this.newelement.prepend('<span class="'+l.widgetBaseClass+'-status">'+n[this._selectedIndex()].text+"</span>");this.element.hide();this.element.attr("disabled")==true&&this.disable();this.value(this._selectedIndex());d(window).resize(function(){l._refreshPosition()})},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind("click");
d("label[for="+this.newelement.attr("id")+"]").attr("for",this.element.attr("id")).unbind("click");this.newelement.remove();this.list.remove();this.element.show();d.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(l,k){var q=this;if(!q._prevChar)q._prevChar=["",0];var n=String.fromCharCode(l);c=n.toLowerCase();var h=false;this.list.find("li a").each(function(s){if(!h){var z=d(this).text();if(z.indexOf(n)==0||z.indexOf(c)==0)if(q._prevChar[0]==n){if(q._prevChar[1]<s){h=true;d(this).trigger(k);
q._prevChar[1]=s}}else{h=true;d(this).trigger(k);q._prevChar[1]=s}}});this._prevChar[0]=n},_uiHash:function(){var l=this.value();return{index:l,option:d("option",this.element).get(l),value:this.element[0].value}},open:function(l){if(this.newelement.attr("aria-disabled")!="true"){this._refreshPosition();this._closeOthers(l);this.newelement.addClass("ui-state-active");this.list.appendTo("body").addClass(this.widgetBaseClass+"-open").attr("aria-hidden",false).find("li:not(."+this.widgetBaseClass+"-group):eq("+
this._selectedIndex()+") a")[0].focus();this.options.style=="dropdown"&&this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top");this._refreshPosition();this._trigger("open",l,this._uiHash())}},close:function(l,k){if(this.newelement.is(".ui-state-active")){this.newelement.removeClass("ui-state-active");this.list.attr("aria-hidden",true).removeClass(this.widgetBaseClass+"-open");this.options.style=="dropdown"&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all");k&&
this.newelement[0].focus();this._trigger("close",l,this._uiHash())}},change:function(l){this.element.trigger("change");this._trigger("change",l,this._uiHash())},select:function(l){this._trigger("select",l,this._uiHash())},_closeOthers:function(l){d("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){d(this).data("selectelement").selectmenu("close",l)});d("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(l,k){this.list.is("."+this.widgetBaseClass+
"-open")?this.close(l,k):this.open(l)},_formatText:function(l){return this.options.format?this.options.format(l):l},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(l){return this._optionLis.eq(parseInt(this._selectedOptionLi().data("index"),10)+l).trigger("mouseup")},_moveFocus:function(l){l=
isNaN(l)?parseInt(this._optionLis.filter(l).data("index"),10):parseInt(this._focusedOptionLi().data("index"),10)+l;if(l<0)l=0;if(l>this._optionLis.size()-1)l=this._optionLis.size()-1;var k=this.widgetBaseClass+"-item-"+Math.round(Math.random()*1E3);this._focusedOptionLi().find("a:eq(0)").attr("id","");this._optionLis.eq(l).find("a:eq(0)").attr("id",k)[0].focus();this.list.attr("aria-activedescendant",k)},_scrollPage:function(l){var k=Math.floor(this.list.outerHeight()/this.list.find("li:first").outerHeight());
k=l=="up"?-k:k;this._moveFocus(k)},_setOption:function(l,k){this.options[l]=k;if(l=="disabled"){this.close();this.element.add(this.newelement).add(this.list)[k?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",k)}},value:function(l){if(arguments.length){this.element[0].selectedIndex=l;this._refreshValue();this._refreshPosition()}return this.element[0].selectedIndex},_refreshValue:function(){var l=this.options.style=="popup"?" ui-state-active":
"",k=this.widgetBaseClass+"-item-"+Math.round(Math.random()*1E3);this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+l).find("a").attr("aria-selected","false").attr("id","");this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+l).find("a").attr("aria-selected","true").attr("id",k);l=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"";var q=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):
"";this.newelement.removeClass(l).data("optionClasses",q).addClass(q).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html());this.list.attr("aria-activedescendant",k)},_refreshPosition:function(){var l=this._pageScroll(),k=this.newelement.offset().top,q=d(window).height(),n=d(this.list[0]).outerHeight();if(k+n>q+l)k-=n;else if(k-l<n)k+=this.newelement.height()+4;else if(this.newelement.is("."+this.widgetBaseClass+"-popup")){var h=this.list[0].scrollTop;this.list.find("li:lt("+
this._selectedIndex()+")").each(function(){h-=d(this).outerHeight()});k+=h}else k+=this.newelement.height();this.list.css({top:k,left:this.newelement.offset().left})},_pageScroll:function(){var l;if(self.pageYOffset)l=self.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)l=document.documentElement.scrollTop;else if(document.body)l=document.body.scrollTop;return l}})})(jQuery);(function(d,l){var k=d.jQuery||d.Cowboy||(d.Cowboy={}),q;k.throttle=q=function(n,h,s,z){function B(){function M(){J=+new Date;s.apply(L,D)}function A(){F=l}var L=this,Q=+new Date-J,D=arguments;z&&!F&&M();F&&clearTimeout(F);if(z===l&&Q>n)M();else if(h!==true)F=setTimeout(z?A:M,z===l?n-Q:n)}var F,J=0;if(typeof h!=="boolean"){z=s;s=h;h=l}if(k.guid)B.guid=s.guid=s.guid||k.guid++;return B};k.debounce=function(n,h,s){return s===l?q(n,h,false):q(n,s,h!==false)}})(this);(function(d,l,k){d.fn.dataTableSettings=[];var q=d.fn.dataTableSettings;d.fn.dataTableExt={};var n=d.fn.dataTableExt;n.sVersion="1.7.3";n.sErrMode="alert";n.iApiIndex=0;n.oApi={};n.afnFiltering=[];n.aoFeatures=[];n.ofnSearch={};n.afnSortData=[];n.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",
sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",
sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};n.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",
sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",
sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",
sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",
sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};n.oPagination={two_button:{fnInit:function(h,s,z){var B,F,J;if(h.bJUI){B=k.createElement("a");F=k.createElement("a");J=k.createElement("span");J.className=h.oClasses.sPageJUINext;F.appendChild(J);J=k.createElement("span");J.className=h.oClasses.sPageJUIPrev;B.appendChild(J)}else{B=k.createElement("div");F=k.createElement("div")}B.className=
h.oClasses.sPagePrevDisabled;F.className=h.oClasses.sPageNextDisabled;B.title=h.oLanguage.oPaginate.sPrevious;F.title=h.oLanguage.oPaginate.sNext;s.appendChild(B);s.appendChild(F);d(B).click(function(){h.oApi._fnPageChange(h,"previous")&&z(h)});d(F).click(function(){h.oApi._fnPageChange(h,"next")&&z(h)});d(B).bind("selectstart",function(){return false});d(F).bind("selectstart",function(){return false});if(h.sTableId!==""&&typeof h.aanFeatures.p=="undefined"){s.setAttribute("id",h.sTableId+"_paginate");
B.setAttribute("id",h.sTableId+"_previous");F.setAttribute("id",h.sTableId+"_next")}},fnUpdate:function(h){if(h.aanFeatures.p)for(var s=h.aanFeatures.p,z=0,B=s.length;z<B;z++)if(s[z].childNodes.length!==0){s[z].childNodes[0].className=h._iDisplayStart===0?h.oClasses.sPagePrevDisabled:h.oClasses.sPagePrevEnabled;s[z].childNodes[1].className=h.fnDisplayEnd()==h.fnRecordsDisplay()?h.oClasses.sPageNextDisabled:h.oClasses.sPageNextEnabled}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(h,s,z){var B=
k.createElement("span"),F=k.createElement("span"),J=k.createElement("span"),M=k.createElement("span"),A=k.createElement("span");B.innerHTML=h.oLanguage.oPaginate.sFirst;F.innerHTML=h.oLanguage.oPaginate.sPrevious;M.innerHTML=h.oLanguage.oPaginate.sNext;A.innerHTML=h.oLanguage.oPaginate.sLast;var L=h.oClasses;B.className=L.sPageButton+" "+L.sPageFirst;F.className=L.sPageButton+" "+L.sPagePrevious;M.className=L.sPageButton+" "+L.sPageNext;A.className=L.sPageButton+" "+L.sPageLast;s.appendChild(B);s.appendChild(F);
s.appendChild(J);s.appendChild(M);s.appendChild(A);d(B).click(function(){h.oApi._fnPageChange(h,"first")&&z(h)});d(F).click(function(){h.oApi._fnPageChange(h,"previous")&&z(h)});d(M).click(function(){h.oApi._fnPageChange(h,"next")&&z(h)});d(A).click(function(){h.oApi._fnPageChange(h,"last")&&z(h)});d("span",s).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(h.sTableId!==""&&typeof h.aanFeatures.p=="undefined"){s.setAttribute("id",h.sTableId+"_paginate");
B.setAttribute("id",h.sTableId+"_first");F.setAttribute("id",h.sTableId+"_previous");M.setAttribute("id",h.sTableId+"_next");A.setAttribute("id",h.sTableId+"_last")}},fnUpdate:function(h,s){if(h.aanFeatures.p){var z=n.oPagination.iFullNumbersShowPages,B=Math.floor(z/2),F=Math.ceil(h.fnRecordsDisplay()/h._iDisplayLength),J=Math.ceil(h._iDisplayStart/h._iDisplayLength)+1,M="",A,L=h.oClasses;if(F<z){B=1;A=F}else if(J<=B){B=1;A=z}else if(J>=F-B){B=F-z+1;A=F}else{B=J-Math.ceil(z/2)+1;A=B+z-1}for(z=B;z<=
A;z++)M+=J!=z?'<span class="'+L.sPageButton+'">'+z+"</span>":'<span class="'+L.sPageButtonActive+'">'+z+"</span>";A=h.aanFeatures.p;var Q,D=function(){h._iDisplayStart=(this.innerHTML*1-1)*h._iDisplayLength;s(h);return false},S=function(){return false};z=0;for(B=A.length;z<B;z++)if(A[z].childNodes.length!==0){Q=d("span:eq(2)",A[z]);Q.html(M);d("span",Q).click(D).bind("mousedown",S).bind("selectstart",S);Q=A[z].getElementsByTagName("span");Q=[Q[0],Q[1],Q[Q.length-2],Q[Q.length-1]];d(Q).removeClass(L.sPageButton+
" "+L.sPageButtonActive+" "+L.sPageButtonStaticDisabled);if(J==1){Q[0].className+=" "+L.sPageButtonStaticDisabled;Q[1].className+=" "+L.sPageButtonStaticDisabled}else{Q[0].className+=" "+L.sPageButton;Q[1].className+=" "+L.sPageButton}if(F===0||J==F||h._iDisplayLength==-1){Q[2].className+=" "+L.sPageButtonStaticDisabled;Q[3].className+=" "+L.sPageButtonStaticDisabled}else{Q[2].className+=" "+L.sPageButton;Q[3].className+=" "+L.sPageButton}}}}}};n.oSort={"string-asc":function(h,s){var z=h.toLowerCase(),
B=s.toLowerCase();return z<B?-1:z>B?1:0},"string-desc":function(h,s){var z=h.toLowerCase(),B=s.toLowerCase();return z<B?1:z>B?-1:0},"html-asc":function(h,s){var z=h.replace(/<.*?>/g,"").toLowerCase(),B=s.replace(/<.*?>/g,"").toLowerCase();return z<B?-1:z>B?1:0},"html-desc":function(h,s){var z=h.replace(/<.*?>/g,"").toLowerCase(),B=s.replace(/<.*?>/g,"").toLowerCase();return z<B?1:z>B?-1:0},"date-asc":function(h,s){var z=Date.parse(h),B=Date.parse(s);if(isNaN(z)||z==="")z=Date.parse("01/01/1970 00:00:00");
if(isNaN(B)||B==="")B=Date.parse("01/01/1970 00:00:00");return z-B},"date-desc":function(h,s){var z=Date.parse(h),B=Date.parse(s);if(isNaN(z)||z==="")z=Date.parse("01/01/1970 00:00:00");if(isNaN(B)||B==="")B=Date.parse("01/01/1970 00:00:00");return B-z},"numeric-asc":function(h,s){return(h=="-"||h===""?0:h*1)-(s=="-"||s===""?0:s*1)},"numeric-desc":function(h,s){return(s=="-"||s===""?0:s*1)-(h=="-"||h===""?0:h*1)}};n.aTypes=[function(h){if(h.length===0)return"numeric";var s,z=false;s=h.charAt(0);if("0123456789-".indexOf(s)==
-1)return null;for(var B=1;B<h.length;B++){s=h.charAt(B);if("0123456789.".indexOf(s)==-1)return null;if(s=="."){if(z)return null;z=true}}return"numeric"},function(h){var s=Date.parse(h);if(s!==null&&!isNaN(s)||h.length===0)return"date";return null},function(h){if(h.indexOf("<")!=-1&&h.indexOf(">")!=-1)return"html";return null}];n.fnVersionCheck=function(h){var s=function(A,L){for(;A.length<L;)A+="0";return A},z=n.sVersion.split(".");h=h.split(".");for(var B="",F="",J=0,M=h.length;J<M;J++){B+=s(z[J],
3);F+=s(h[J],3)}return parseInt(B,10)>=parseInt(F,10)};n._oExternConfig={iNextUnique:0};d.fn.dataTable=function(h){function s(){this.fnRecordsTotal=function(){return this.oFeatures.bServerSide?this._iRecordsTotal:this.aiDisplayMaster.length};this.fnRecordsDisplay=function(){return this.oFeatures.bServerSide?this._iRecordsDisplay:this.aiDisplay.length};this.fnDisplayEnd=function(){return this.oFeatures.bServerSide?this.oFeatures.bPaginate===false||this._iDisplayLength==-1?this._iDisplayStart+this.aiDisplay.length:
Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd};this.sInstance=this.oInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",
sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=
[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnFooterCallback=this.fnHeaderCallback=this.fnRowCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTableWrapper=this.nTBody=this.nTFoot=this.nTHead=this.nTable=null;this.iDefaultSortIndex=0;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=7200;this.sCookiePrefix="SpryMedia_DataTables_";
this.sAjaxSource=this.fnCookieCallback=null;this.bAjaxDataGet=true;this.fnServerData=function(a,e,f){d.ajax({url:a,data:e,success:f,dataType:"json",cache:false,error:function(){alert("DataTables warning: JSON data from server failed to load or be parsed. This is most likely to be caused by a JSON formatting error.")}})};this.fnFormatNumber=function(a){if(a<1E3)return a;else{var e=a+"";a=e.split("");var f="";e=e.length;for(var g=0;g<e;g++){if(g%3===0&&g!==0)f=","+f;f=a[e-g-1]+f}}return f};this.aLengthMenu=
[10,25,50,100];this.bDrawing=this.iDraw=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsDisplay=this._iRecordsTotal=0;this.bJUI=false;this.oClasses=n.oStdClasses;this.bSorted=this.bFiltered=false;this.oInit=null}function z(a){return function(){var e=[ha(this[n.iApiIndex])].concat(Array.prototype.slice.call(arguments));return n.oApi[a].apply(this,e)}}function B(a){var e,f;if(a.bInitialised===false)setTimeout(function(){B(a)},200);else{w(a);Q(a);
a.oFeatures.bAutoWidth&&ta(a);e=0;for(f=a.aoColumns.length;e<f;e++)if(a.aoColumns[e].sWidth!==null)a.aoColumns[e].nTh.style.width=W(a.aoColumns[e].sWidth);if(a.oFeatures.bSort)O(a);else{a.aiDisplay=a.aiDisplayMaster.slice();Y(a);D(a)}if(a.sAjaxSource!==null&&!a.oFeatures.bServerSide){na(a,true);a.fnServerData.call(a.oInstance,a.sAjaxSource,[],function(g){for(e=0;e<g.aaData.length;e++)A(a,g.aaData[e]);a.iInitDisplayStart=a._iDisplayStart;if(a.oFeatures.bSort)O(a);else{a.aiDisplay=a.aiDisplayMaster.slice();
Y(a);D(a)}na(a,false);typeof a.fnInitComplete=="function"&&a.fnInitComplete.call(a.oInstance,a,g)})}else a.oFeatures.bServerSide||na(a,false)}}function F(a,e,f){P(a.oLanguage,e,"sProcessing");P(a.oLanguage,e,"sLengthMenu");P(a.oLanguage,e,"sEmptyTable");P(a.oLanguage,e,"sZeroRecords");P(a.oLanguage,e,"sInfo");P(a.oLanguage,e,"sInfoEmpty");P(a.oLanguage,e,"sInfoFiltered");P(a.oLanguage,e,"sInfoPostFix");P(a.oLanguage,e,"sSearch");if(typeof e.oPaginate!="undefined"){P(a.oLanguage.oPaginate,e.oPaginate,
"sFirst");P(a.oLanguage.oPaginate,e.oPaginate,"sPrevious");P(a.oLanguage.oPaginate,e.oPaginate,"sNext");P(a.oLanguage.oPaginate,e.oPaginate,"sLast")}typeof e.sEmptyTable=="undefined"&&typeof e.sZeroRecords!="undefined"&&P(a.oLanguage,e,"sZeroRecords","sEmptyTable");f&&B(a)}function J(a,e){a.aoColumns[a.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,sTitle:e?
e.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:a.aoColumns.length-1,sSortDataType:"std",nTh:e?e:k.createElement("th"),nTf:null};var f=a.aoColumns.length-1;if(typeof a.aoPreSearchCols[f]=="undefined"||a.aoPreSearchCols[f]===null)a.aoPreSearchCols[f]={sSearch:"",bRegex:false,bSmart:true};else{if(typeof a.aoPreSearchCols[f].bRegex=="undefined")a.aoPreSearchCols[f].bRegex=true;if(typeof a.aoPreSearchCols[f].bSmart=="undefined")a.aoPreSearchCols[f].bSmart=
true}M(a,f,null)}function M(a,e,f){e=a.aoColumns[e];if(typeof f!="undefined"&&f!==null){if(typeof f.sType!="undefined"){e.sType=f.sType;e._bAutoType=false}P(e,f,"bVisible");P(e,f,"bSearchable");P(e,f,"bSortable");P(e,f,"sTitle");P(e,f,"sName");P(e,f,"sWidth");P(e,f,"sWidth","sWidthOrig");P(e,f,"sClass");P(e,f,"fnRender");P(e,f,"bUseRendered");P(e,f,"iDataSort");P(e,f,"asSorting");P(e,f,"sSortDataType")}if(!a.oFeatures.bSort)e.bSortable=false;if(!e.bSortable||d.inArray("asc",e.asSorting)==-1&&d.inArray("desc",
e.asSorting)==-1){e.sSortingClass=a.oClasses.sSortableNone;e.sSortingClassJUI=""}else if(d.inArray("asc",e.asSorting)!=-1&&d.inArray("desc",e.asSorting)==-1){e.sSortingClass=a.oClasses.sSortableAsc;e.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed}else if(d.inArray("asc",e.asSorting)==-1&&d.inArray("desc",e.asSorting)!=-1){e.sSortingClass=a.oClasses.sSortableDesc;e.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed}}function A(a,e){if(e.length!=a.aoColumns.length&&a.iDrawError!=a.iDraw){pa(a,0,"Added data (size "+
e.length+") does not match known number of columns ("+a.aoColumns.length+")");a.iDrawError=a.iDraw;return-1}var f=e.slice(),g=a.aoData.length;a.aoData.push({nTr:k.createElement("tr"),_iId:a.iNextId++,_aData:f,_anHidden:[],_sRowStripe:""});for(var p,j,t=0;t<f.length;t++){p=k.createElement("td");if(f[t]===null)f[t]="";if(typeof a.aoColumns[t].fnRender=="function"){j=a.aoColumns[t].fnRender({iDataRow:g,iDataColumn:t,aData:f,oSettings:a});p.innerHTML=j;if(a.aoColumns[t].bUseRendered)a.aoData[g]._aData[t]=
j}else p.innerHTML=f[t];if(typeof f[t]!="string")f[t]+="";f[t]=d.trim(f[t]);if(a.aoColumns[t].sClass!==null)p.className=a.aoColumns[t].sClass;if(a.aoColumns[t]._bAutoType&&a.aoColumns[t].sType!="string"){j=Fa(a.aoData[g]._aData[t]);if(a.aoColumns[t].sType===null)a.aoColumns[t].sType=j;else if(a.aoColumns[t].sType!=j)a.aoColumns[t].sType="string"}if(a.aoColumns[t].bVisible)a.aoData[g].nTr.appendChild(p);else a.aoData[g]._anHidden[t]=p}a.aiDisplayMaster.push(g);return g}function L(a){var e,f,g,p,j,
t,v,K;if(a.sAjaxSource===null){v=a.nTBody.childNodes;e=0;for(f=v.length;e<f;e++)if(v[e].nodeName.toUpperCase()=="TR"){t=a.aoData.length;a.aoData.push({nTr:v[e],_iId:a.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});a.aiDisplayMaster.push(t);K=a.aoData[t]._aData;t=v[e].childNodes;g=j=0;for(p=t.length;g<p;g++)if(t[g].nodeName.toUpperCase()=="TD"){K[j]=d.trim(t[g].innerHTML);j++}}}v=za(a);t=[];e=0;for(f=v.length;e<f;e++){g=0;for(p=v[e].childNodes.length;g<p;g++){j=v[e].childNodes[g];j.nodeName.toUpperCase()==
"TD"&&t.push(j)}}t.length!=v.length*a.aoColumns.length&&pa(a,1,"Unexpected number of TD elements. Expected "+v.length*a.aoColumns.length+" and got "+t.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.");v=0;for(g=a.aoColumns.length;v<g;v++){if(a.aoColumns[v].sTitle===null)a.aoColumns[v].sTitle=a.aoColumns[v].nTh.innerHTML;p=a.aoColumns[v]._bAutoType;j=typeof a.aoColumns[v].fnRender=="function";K=a.aoColumns[v].sClass!==
null;var N=a.aoColumns[v].bVisible,T,X;if(p||j||K||!N){e=0;for(f=a.aoData.length;e<f;e++){T=t[e*g+v];if(p)if(a.aoColumns[v].sType!="string"){X=Fa(a.aoData[e]._aData[v]);if(a.aoColumns[v].sType===null)a.aoColumns[v].sType=X;else if(a.aoColumns[v].sType!=X)a.aoColumns[v].sType="string"}if(j){X=a.aoColumns[v].fnRender({iDataRow:e,iDataColumn:v,aData:a.aoData[e]._aData,oSettings:a});T.innerHTML=X;if(a.aoColumns[v].bUseRendered)a.aoData[e]._aData[v]=X}if(K)T.className+=" "+a.aoColumns[v].sClass;if(!N){a.aoData[e]._anHidden[v]=
T;T.parentNode.removeChild(T)}}}}}function Q(a){var e,f,g,p=0;if(a.nTHead.getElementsByTagName("th").length!==0){e=0;for(g=a.aoColumns.length;e<g;e++){f=a.aoColumns[e].nTh;if(a.aoColumns[e].bVisible){if(a.aoColumns[e].sTitle!=f.innerHTML)f.innerHTML=a.aoColumns[e].sTitle}else{f.parentNode.removeChild(f);p++}}}else{p=k.createElement("tr");e=0;for(g=a.aoColumns.length;e<g;e++){f=a.aoColumns[e].nTh;f.innerHTML=a.aoColumns[e].sTitle;if(a.aoColumns[e].bVisible){if(a.aoColumns[e].sClass!==null)f.className=
a.aoColumns[e].sClass;p.appendChild(f)}}d(a.nTHead).html("")[0].appendChild(p)}if(a.bJUI){e=0;for(g=a.aoColumns.length;e<g;e++){f=a.aoColumns[e].nTh;p=k.createElement("div");p.className=a.oClasses.sSortJUIWrapper;d(f).contents().appendTo(p);p.appendChild(k.createElement("span"));f.appendChild(p)}}g=function(){this.onselectstart=function(){return false};return false};if(a.oFeatures.bSort)for(e=0;e<a.aoColumns.length;e++)if(a.aoColumns[e].bSortable!==false){R(a,a.aoColumns[e].nTh,e);d(a.aoColumns[e].nTh).mousedown(g)}else d(a.aoColumns[e].nTh).addClass(a.oClasses.sSortableNone);
if(a.nTFoot!==null){p=0;f=a.nTFoot.getElementsByTagName("th");e=0;for(g=f.length;e<g;e++)if(typeof a.aoColumns[e]!="undefined"){a.aoColumns[e].nTf=f[e-p];if(a.oClasses.sFooterTH!=="")a.aoColumns[e].nTf.className+=" "+a.oClasses.sFooterTH;if(!a.aoColumns[e].bVisible){f[e-p].parentNode.removeChild(f[e-p]);p++}}}}function D(a){var e,f,g=[],p=0,j=false;e=a.asStripClasses.length;f=a.aoOpenRows.length;a.bDrawing=true;if(typeof a.iInitDisplayStart!="undefined"&&a.iInitDisplayStart!=-1){a._iDisplayStart=
a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart;a.iInitDisplayStart=-1;Y(a)}if(!(a.oFeatures.bServerSide&&!ia(a))){a.oFeatures.bServerSide||a.iDraw++;if(a.aiDisplay.length!==0){var t=a._iDisplayStart,v=a._iDisplayEnd;if(a.oFeatures.bServerSide){t=0;v=a.aoData.length}for(;t<v;t++){var K=a.aoData[a.aiDisplay[t]],N=K.nTr;if(e!==0){var T=a.asStripClasses[p%e];if(K._sRowStripe!=T){d(N).removeClass(K._sRowStripe).addClass(T);K._sRowStripe=T}}if(typeof a.fnRowCallback==
"function"){N=a.fnRowCallback.call(a.oInstance,N,a.aoData[a.aiDisplay[t]]._aData,p,t);if(!N&&!j){pa(a,0,"A node was not returned by fnRowCallback");j=true}}g.push(N);p++;if(f!==0)for(K=0;K<f;K++)N==a.aoOpenRows[K].nParent&&g.push(a.aoOpenRows[K].nTr)}}else{g[0]=k.createElement("tr");if(typeof a.asStripClasses[0]!="undefined")g[0].className=a.asStripClasses[0];j=k.createElement("td");j.setAttribute("valign","top");j.colSpan=aa(a);j.className=a.oClasses.sRowEmpty;j.innerHTML=typeof a.oLanguage.sEmptyTable!=
"undefined"&&a.fnRecordsTotal()===0?a.oLanguage.sEmptyTable:a.oLanguage.sZeroRecords.replace("_MAX_",a.fnFormatNumber(a.fnRecordsTotal()));g[p].appendChild(j)}typeof a.fnHeaderCallback=="function"&&a.fnHeaderCallback.call(a.oInstance,d(">tr",a.nTHead)[0],Ca(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay);typeof a.fnFooterCallback=="function"&&a.fnFooterCallback.call(a.oInstance,d(">tr",a.nTFoot)[0],Ca(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay);p=k.createDocumentFragment();e=k.createDocumentFragment();
if(a.nTBody){j=a.nTBody.parentNode;e.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered){f=a.nTBody.childNodes;for(e=f.length-1;e>=0;e--)f[e].parentNode.removeChild(f[e])}e=0;for(f=g.length;e<f;e++)p.appendChild(g[e]);a.nTBody.appendChild(p);j!==null&&j.appendChild(a.nTBody)}e=0;for(f=a.aoDrawCallback.length;e<f;e++)a.aoDrawCallback[e].fn.call(a.oInstance,a);a.bSorted=false;a.bFiltered=false;a.bDrawing=false;if(typeof a._bInitComplete=="undefined"){a._bInitComplete=
true;if(typeof a.fnInitComplete=="function"&&(a.oFeatures.bServerSide||a.sAjaxSource===null))a.fnInitComplete.call(a.oInstance,a)}}}function S(a){if(a.oFeatures.bSort)O(a,a.oPreviousSearch);else if(a.oFeatures.bFilter)ba(a,a.oPreviousSearch);else{Y(a);D(a)}}function ia(a){if(a.bAjaxDataGet){na(a,true);var e=a.aoColumns.length,f=[],g;a.iDraw++;f.push({name:"sEcho",value:a.iDraw});f.push({name:"iColumns",value:e});f.push({name:"sColumns",value:Ga(a)});f.push({name:"iDisplayStart",value:a._iDisplayStart});
f.push({name:"iDisplayLength",value:a.oFeatures.bPaginate!==false?a._iDisplayLength:-1});if(a.oFeatures.bFilter!==false){f.push({name:"sSearch",value:a.oPreviousSearch.sSearch});f.push({name:"bRegex",value:a.oPreviousSearch.bRegex});for(g=0;g<e;g++){f.push({name:"sSearch_"+g,value:a.aoPreSearchCols[g].sSearch});f.push({name:"bRegex_"+g,value:a.aoPreSearchCols[g].bRegex});f.push({name:"bSearchable_"+g,value:a.aoColumns[g].bSearchable})}}if(a.oFeatures.bSort!==false){var p=a.aaSortingFixed!==null?a.aaSortingFixed.length:
0,j=a.aaSorting.length;f.push({name:"iSortingCols",value:p+j});for(g=0;g<p;g++){f.push({name:"iSortCol_"+g,value:a.aaSortingFixed[g][0]});f.push({name:"sSortDir_"+g,value:a.aaSortingFixed[g][1]})}for(g=0;g<j;g++){f.push({name:"iSortCol_"+(g+p),value:a.aaSorting[g][0]});f.push({name:"sSortDir_"+(g+p),value:a.aaSorting[g][1]})}for(g=0;g<e;g++)f.push({name:"bSortable_"+g,value:a.aoColumns[g].bSortable})}a.fnServerData.call(a.oInstance,a.sAjaxSource,f,function(t){fa(a,t)});return false}else return true}
function fa(a,e){if(typeof e.sEcho!="undefined")if(e.sEcho*1<a.iDraw)return;else a.iDraw=e.sEcho*1;if(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))Ha(a);a._iRecordsTotal=e.iTotalRecords;a._iRecordsDisplay=e.iTotalDisplayRecords;var f=Ga(a);if(f=typeof e.sColumns!="undefined"&&f!==""&&e.sColumns!=f)var g=Pa(a,e.sColumns);for(var p=0,j=e.aaData.length;p<j;p++)if(f){for(var t=[],v=0,K=a.aoColumns.length;v<K;v++)t.push(e.aaData[p][g[v]]);A(a,t)}else A(a,e.aaData[p]);a.aiDisplay=
a.aiDisplayMaster.slice();a.bAjaxDataGet=false;D(a);a.bAjaxDataGet=true;na(a,false)}function w(a){var e=k.createElement("div");a.nTable.parentNode.insertBefore(e,a.nTable);a.nTableWrapper=k.createElement("div");a.nTableWrapper.className=a.oClasses.sWrapper;a.sTableId!==""&&a.nTableWrapper.setAttribute("id",a.sTableId+"_wrapper");for(var f=a.nTableWrapper,g=a.sDom.split(""),p,j,t,v,K,N,T,X=0;X<g.length;X++){j=0;t=g[X];if(t=="<"){v=k.createElement("div");K=g[X+1];if(K=="'"||K=='"'){N="";for(T=2;g[X+
T]!=K;){N+=g[X+T];T++}if(N=="H")N="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix";else if(N=="F")N="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix";if(N.indexOf(".")!=-1){K=N.split(".");v.setAttribute("id",K[0].substr(1,K[0].length-1));v.className=K[1]}else if(N.charAt(0)=="#")v.setAttribute("id",N.substr(1,N.length-1));else v.className=N;X+=T}f.appendChild(v);f=v}else if(t==">")f=f.parentNode;else if(t=="l"&&a.oFeatures.bPaginate&&
a.oFeatures.bLengthChange){p=wa(a);j=1}else if(t=="f"&&a.oFeatures.bFilter){p=ja(a);j=1}else if(t=="r"&&a.oFeatures.bProcessing){p=Da(a);j=1}else if(t=="t"){p=V(a);j=1}else if(t=="i"&&a.oFeatures.bInfo){p=xa(a);j=1}else if(t=="p"&&a.oFeatures.bPaginate){p=sa(a);j=1}else if(n.aoFeatures.length!==0){v=n.aoFeatures;T=0;for(K=v.length;T<K;T++)if(t==v[T].cFeature){if(p=v[T].fnInit(a))j=1;break}}if(j==1&&p!==null){if(typeof a.aanFeatures[t]!="object")a.aanFeatures[t]=[];a.aanFeatures[t].push(p);f.appendChild(p)}}e.parentNode.replaceChild(a.nTableWrapper,
e)}function V(a){if(a.oScroll.sX===""&&a.oScroll.sY==="")return a.nTable;var e=k.createElement("div"),f=k.createElement("div"),g=k.createElement("div"),p=k.createElement("div"),j=k.createElement("div"),t=k.createElement("div"),v=a.nTable.cloneNode(false),K=a.nTable.cloneNode(false),N=a.nTable.getElementsByTagName("thead")[0],T=a.nTable.getElementsByTagName("tfoot").length===0?null:a.nTable.getElementsByTagName("tfoot")[0],X=typeof h.bJQueryUI!="undefined"&&h.bJQueryUI?n.oJUIClasses:n.oStdClasses;
f.appendChild(g);j.appendChild(t);p.appendChild(a.nTable);e.appendChild(f);e.appendChild(p);g.appendChild(v);v.appendChild(N);if(T!==null){e.appendChild(j);t.appendChild(K);K.appendChild(T)}e.className=X.sScrollWrapper;f.className=X.sScrollHead;g.className=X.sScrollHeadInner;p.className=X.sScrollBody;j.className=X.sScrollFoot;t.className=X.sScrollFootInner;f.style.overflow="hidden";j.style.overflow="hidden";p.style.overflow="auto";f.style.border="0";j.style.border="0";g.style.width="150%";v.removeAttribute("id");
v.style.marginLeft="0";a.nTable.style.marginLeft="0";if(T!==null){K.removeAttribute("id");K.style.marginLeft="0"}g=d(">caption",a.nTable);t=0;for(K=g.length;t<K;t++)v.appendChild(g[t]);if(a.oScroll.sX!==""){f.style.width=W(a.oScroll.sX);p.style.width=W(a.oScroll.sX);if(T!==null)j.style.width=W(a.oScroll.sX);d(p).scroll(function(){f.scrollLeft=this.scrollLeft;if(T!==null)j.scrollLeft=this.scrollLeft})}if(a.oScroll.sY!=="")p.style.height=W(a.oScroll.sY);a.aoDrawCallback.push({fn:U,sName:"scrolling"});
a.oScroll.bInfinite&&d(p).scroll(function(){if(!a.bDrawing)if(d(this).scrollTop()+d(this).height()>d(a.nTable).height()-a.oScroll.iLoadGap)if(a.fnDisplayEnd()<a.fnRecordsDisplay()){Aa(a,"next");Y(a);D(a)}});a.nScrollHead=f;a.nScrollFoot=j;return e}function U(a){var e=a.nScrollHead.getElementsByTagName("div")[0],f=e.getElementsByTagName("table")[0],g=a.nTable.parentNode,p,j,t,v,K,N,T,X,la=[];t=a.nTable.getElementsByTagName("thead");t.length>0&&a.nTable.removeChild(t[0]);if(a.nTFoot!==null){K=a.nTable.getElementsByTagName("tfoot");
K.length>0&&a.nTable.removeChild(K[0])}t=a.nTHead.cloneNode(true);a.nTable.insertBefore(t,a.nTable.childNodes[0]);if(a.nTFoot!==null){K=a.nTFoot.cloneNode(true);a.nTable.insertBefore(K,a.nTable.childNodes[1])}var qa=Ia(t);p=0;for(j=qa.length;p<j;p++){T=Ba(a,p);qa[p].style.width=a.aoColumns[T].sWidth}a.nTFoot!==null&&ua(function(ea){ea.style.width=""},K.getElementsByTagName("tr"));p=d(a.nTable).outerWidth();if(a.oScroll.sX===""){a.nTable.style.width="100%";if(d.browser.msie&&d.browser.version<=7)a.nTable.style.width=
W(d(a.nTable).outerWidth()-a.oScroll.iBarWidth)}else if(a.oScroll.sXInner!=="")a.nTable.style.width=W(a.oScroll.sXInner);else if(p==d(g).width()&&d(g).height()<d(a.nTable).height()){a.nTable.style.width=W(p-a.oScroll.iBarWidth);if(d(a.nTable).outerWidth()>p-a.oScroll.iBarWidth)a.nTable.style.width=W(p)}else a.nTable.style.width=W(p);p=d(a.nTable).outerWidth();j=a.nTHead.getElementsByTagName("tr");t=t.getElementsByTagName("tr");ua(function(ea,ka){N=ea.style;N.paddingTop="0";N.paddingBottom="0";N.borderTopWidth=
"0";N.borderBottomWidth="0";N.height=0;X=d(ea).width();ka.style.width=W(X);la.push(X)},t,j);d(t).height(0);if(a.nTFoot!==null){v=K.getElementsByTagName("tr");K=a.nTFoot.getElementsByTagName("tr");ua(function(ea,ka){N=ea.style;N.paddingTop="0";N.paddingBottom="0";N.borderTopWidth="0";N.borderBottomWidth="0";X=d(ea).width();ka.style.width=W(X);la.push(X)},v,K);d(v).height(0)}ua(function(ea){ea.innerHTML="";ea.style.width=W(la.shift())},t);a.nTFoot!==null&&ua(function(ea){ea.innerHTML="";ea.style.width=
W(la.shift())},v);if(d(a.nTable).outerWidth()<p)if(a.oScroll.sX==="")pa(a,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn");else a.oScroll.sXInner!==""&&pa(a,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation");
if(a.oScroll.sY==="")if(d.browser.msie&&d.browser.version<=7)g.style.height=W(a.nTable.offsetHeight+a.oScroll.iBarWidth);if(a.oScroll.sY!==""&&a.oScroll.bCollapse){g.style.height=W(a.oScroll.sY);v=a.oScroll.sX!==""&&a.nTable.offsetWidth>g.offsetWidth?a.oScroll.iBarWidth:0;if(a.nTable.offsetHeight<g.offsetHeight)g.style.height=W(d(a.nTable).height()+v)}f.style.width=W(d(a.nTable).outerWidth());e.style.width=W(d(a.nTable).outerWidth()+a.oScroll.iBarWidth);if(a.nTFoot!==null){e=a.nScrollFoot.getElementsByTagName("div")[0];
f=e.getElementsByTagName("table")[0];e.style.width=W(a.nTable.offsetWidth+a.oScroll.iBarWidth);f.style.width=W(a.nTable.offsetWidth)}if(a.bSorted||a.bFiltered)g.scrollTop=0}function ga(a){if(a.oFeatures.bAutoWidth===false)return false;ta(a);for(var e=0,f=a.aoColumns.length;e<f;e++)a.aoColumns[e].nTh.style.width=a.aoColumns[e].sWidth}function ja(a){var e=k.createElement("div");a.sTableId!==""&&typeof a.aanFeatures.f=="undefined"&&e.setAttribute("id",a.sTableId+"_filter");e.className=a.oClasses.sFilter;
e.innerHTML=a.oLanguage.sSearch+(a.oLanguage.sSearch===""?"":" ")+'<input type="text" />';var f=d("input",e);f.val(a.oPreviousSearch.sSearch.replace('"',"&quot;"));f.keyup(function(){for(var g=a.aanFeatures.f,p=0,j=g.length;p<j;p++)g[p]!=this.parentNode&&d("input",g[p]).val(this.value);ba(a,{sSearch:this.value,bRegex:a.oPreviousSearch.bRegex,bSmart:a.oPreviousSearch.bSmart})});f.keypress(function(g){if(g.keyCode==13)return false});return e}function ba(a,e,f){o(a,e.sSearch,f,e.bRegex,e.bSmart);for(e=
0;e<a.aoPreSearchCols.length;e++)ca(a,a.aoPreSearchCols[e].sSearch,e,a.aoPreSearchCols[e].bRegex,a.aoPreSearchCols[e].bSmart);n.afnFiltering.length!==0&&da(a);a.bFiltered=true;a._iDisplayStart=0;Y(a);D(a);u(a,0)}function da(a){for(var e=n.afnFiltering,f=0,g=e.length;f<g;f++)for(var p=0,j=0,t=a.aiDisplay.length;j<t;j++){var v=a.aiDisplay[j-p];if(!e[f](a,a.aoData[v]._aData,v)){a.aiDisplay.splice(j-p,1);p++}}}function ca(a,e,f,g,p){if(e!==""){var j=0;e=E(e,g,p);for(g=a.aiDisplay.length-1;g>=0;g--){p=
H(a.aoData[a.aiDisplay[g]]._aData[f],a.aoColumns[f].sType);if(!e.test(p)){a.aiDisplay.splice(g,1);j++}}}}function o(a,e,f,g,p){var j=E(e,g,p);if(typeof f=="undefined"||f===null)f=0;if(n.afnFiltering.length!==0)f=1;if(e.length<=0){a.aiDisplay.splice(0,a.aiDisplay.length);a.aiDisplay=a.aiDisplayMaster.slice()}else if(a.aiDisplay.length==a.aiDisplayMaster.length||a.oPreviousSearch.sSearch.length>e.length||f==1||e.indexOf(a.oPreviousSearch.sSearch)!==0){a.aiDisplay.splice(0,a.aiDisplay.length);u(a,1);
for(f=0;f<a.aiDisplayMaster.length;f++)j.test(a.asDataSearch[f])&&a.aiDisplay.push(a.aiDisplayMaster[f])}else{var t=0;for(f=0;f<a.asDataSearch.length;f++)if(!j.test(a.asDataSearch[f])){a.aiDisplay.splice(f-t,1);t++}}a.oPreviousSearch.sSearch=e;a.oPreviousSearch.bRegex=g;a.oPreviousSearch.bSmart=p}function u(a,e){a.asDataSearch.splice(0,a.asDataSearch.length);for(var f=k.createElement("div"),g=typeof e!="undefined"&&e==1?a.aiDisplayMaster:a.aiDisplay,p=0,j=g.length;p<j;p++){a.asDataSearch[p]="";for(var t=
0,v=a.aoColumns.length;t<v;t++)if(a.aoColumns[t].bSearchable)a.asDataSearch[p]+=H(a.aoData[g[p]]._aData[t],a.aoColumns[t].sType)+"  ";if(a.asDataSearch[p].indexOf("&")!==-1){f.innerHTML=a.asDataSearch[p];a.asDataSearch[p]=f.textContent?f.textContent:f.innerText;a.asDataSearch[p]=a.asDataSearch[p].replace(/\n/g," ").replace(/\r/g,"")}}}function E(a,e,f){if(f){a=e?a.split(" "):Ja(a).split(" ");a="^(?=.*?"+a.join(")(?=.*?")+").*$"}else a=e?a:Ja(a);return RegExp(a,"i")}function H(a,e){if(typeof n.ofnSearch[e]==
"function")return n.ofnSearch[e](a);else if(e=="html")return a.replace(/\n/g," ").replace(/<.*?>/g,"");else if(typeof a=="string")return a.replace(/\n/g," ");return a}function O(a,e){var f=[],g=n.oSort,p=a.aoData,j,t,v,K;if(!a.oFeatures.bServerSide&&(a.aaSorting.length!==0||a.aaSortingFixed!==null)){f=a.aaSortingFixed!==null?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(v=0;v<f.length;v++){j=f[v][0];t=C(a,j);K=a.aoColumns[j].sSortDataType;if(typeof n.afnSortData[K]!="undefined"){var N=
n.afnSortData[K](a,j,t);t=0;for(K=p.length;t<K;t++)p[t]._aData[j]=N[t]}}if(l.runtime){var T=[],X=f.length;for(v=0;v<X;v++){j=a.aoColumns[f[v][0]].iDataSort;T.push([j,a.aoColumns[j].sType+"-"+f[v][1]])}a.aiDisplayMaster.sort(function(la,qa){for(var ea,ka=0;ka<X;ka++){ea=g[T[ka][1]](p[la]._aData[T[ka][0]],p[qa]._aData[T[ka][0]]);if(ea!==0)return ea}return 0})}else{this.ClosureDataTables={fn:function(){},data:p,sort:n.oSort,master:a.aiDisplayMaster.slice()};K="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";
for(v=0;v<f.length-1;v++){j=a.aoColumns[f[v][0]].iDataSort;t=a.aoColumns[j].sType;K+="iTest = oSort['"+t+"-"+f[v][1]+"']( aoData[a]._aData["+j+"], aoData[b]._aData["+j+"] ); if ( iTest === 0 )"}if(f.length>0){j=a.aoColumns[f[f.length-1][0]].iDataSort;t=a.aoColumns[j].sType;K+="iTest = oSort['"+t+"-"+f[f.length-1][1]+"']( aoData[a]._aData["+j+"], aoData[b]._aData["+j+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(K);a.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=
undefined}}if(typeof e=="undefined"||e)Z(a);a.bSorted=true;if(a.oFeatures.bFilter)ba(a,a.oPreviousSearch,1);else{a.aiDisplay=a.aiDisplayMaster.slice();a._iDisplayStart=0;Y(a);D(a)}}function R(a,e,f,g){d(e).click(function(p){if(a.aoColumns[f].bSortable!==false){var j=function(){var t,v;if(p.shiftKey){for(var K=false,N=0;N<a.aaSorting.length;N++)if(a.aaSorting[N][0]==f){K=true;t=a.aaSorting[N][0];v=a.aaSorting[N][2]+1;if(typeof a.aoColumns[t].asSorting[v]=="undefined")a.aaSorting.splice(N,1);else{a.aaSorting[N][1]=
a.aoColumns[t].asSorting[v];a.aaSorting[N][2]=v}break}K===false&&a.aaSorting.push([f,a.aoColumns[f].asSorting[0],0])}else if(a.aaSorting.length==1&&a.aaSorting[0][0]==f){t=a.aaSorting[0][0];v=a.aaSorting[0][2]+1;if(typeof a.aoColumns[t].asSorting[v]=="undefined")v=0;a.aaSorting[0][1]=a.aoColumns[t].asSorting[v];a.aaSorting[0][2]=v}else{a.aaSorting.splice(0,a.aaSorting.length);a.aaSorting.push([f,a.aoColumns[f].asSorting[0],0])}O(a)};if(a.oFeatures.bProcessing){na(a,true);setTimeout(function(){j();
a.oFeatures.bServerSide||na(a,false)},0)}else j();typeof g=="function"&&g(a)}})}function Z(a){var e,f,g,p,j,t=a.aoColumns.length,v=a.oClasses;for(e=0;e<t;e++)a.aoColumns[e].bSortable&&d(a.aoColumns[e].nTh).removeClass(v.sSortAsc+" "+v.sSortDesc+" "+a.aoColumns[e].sSortingClass);p=a.aaSortingFixed!==null?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(e=0;e<a.aoColumns.length;e++)if(a.aoColumns[e].bSortable){j=a.aoColumns[e].sSortingClass;g=-1;for(f=0;f<p.length;f++)if(p[f][0]==e){j=p[f][1]==
"asc"?v.sSortAsc:v.sSortDesc;g=f;break}d(a.aoColumns[e].nTh).addClass(j);if(a.bJUI){f=d("span",a.aoColumns[e].nTh);f.removeClass(v.sSortJUIAsc+" "+v.sSortJUIDesc+" "+v.sSortJUI+" "+v.sSortJUIAscAllowed+" "+v.sSortJUIDescAllowed);f.addClass(g==-1?a.aoColumns[e].sSortingClassJUI:p[g][1]=="asc"?v.sSortJUIAsc:v.sSortJUIDesc)}}else d(a.aoColumns[e].nTh).addClass(a.aoColumns[e].sSortingClass);j=v.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){g=Ea(a);if(g.length>=t)for(e=0;e<t;e++)if(g[e].className.indexOf(j+
"1")!=-1){f=0;for(a=g.length/t;f<a;f++)g[t*f+e].className=d.trim(g[t*f+e].className.replace(j+"1",""))}else if(g[e].className.indexOf(j+"2")!=-1){f=0;for(a=g.length/t;f<a;f++)g[t*f+e].className=d.trim(g[t*f+e].className.replace(j+"2",""))}else if(g[e].className.indexOf(j+"3")!=-1){f=0;for(a=g.length/t;f<a;f++)g[t*f+e].className=d.trim(g[t*f+e].className.replace(" "+j+"3",""))}v=1;var K;for(e=0;e<p.length;e++){K=parseInt(p[e][0],10);f=0;for(a=g.length/t;f<a;f++)g[t*f+K].className+=" "+j+v;v<3&&v++}}}
function sa(a){if(a.oScroll.bInfinite)return null;var e=k.createElement("div");e.className=a.oClasses.sPaging+a.sPaginationType;n.oPagination[a.sPaginationType].fnInit(a,e,function(f){Y(f);D(f)});typeof a.aanFeatures.p=="undefined"&&a.aoDrawCallback.push({fn:function(f){n.oPagination[f.sPaginationType].fnUpdate(f,function(g){Y(g);D(g)})},sName:"pagination"});return e}function Aa(a,e){var f=a._iDisplayStart;if(e=="first")a._iDisplayStart=0;else if(e=="previous"){a._iDisplayStart=a._iDisplayLength>=
0?a._iDisplayStart-a._iDisplayLength:0;if(a._iDisplayStart<0)a._iDisplayStart=0}else if(e=="next")if(a._iDisplayLength>=0){if(a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay())a._iDisplayStart+=a._iDisplayLength}else a._iDisplayStart=0;else if(e=="last")if(a._iDisplayLength>=0){var g=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(g-1)*a._iDisplayLength}else a._iDisplayStart=0;else pa(a,0,"Unknown paging action: "+e);return f!=a._iDisplayStart}function xa(a){var e=
k.createElement("div");e.className=a.oClasses.sInfo;if(typeof a.aanFeatures.i=="undefined"){a.aoDrawCallback.push({fn:ya,sName:"information"});a.sTableId!==""&&e.setAttribute("id",a.sTableId+"_info")}return e}function ya(a){if(!(!a.oFeatures.bInfo||a.aanFeatures.i.length===0)){var e=a._iDisplayStart+1,f=a.fnDisplayEnd(),g=a.fnRecordsTotal(),p=a.fnRecordsDisplay(),j=a.fnFormatNumber(e),t=a.fnFormatNumber(f),v=a.fnFormatNumber(g),K=a.fnFormatNumber(p);if(a.oScroll.bInfinite)j=a.fnFormatNumber(1);j=
a.fnRecordsDisplay()===0&&a.fnRecordsDisplay()==a.fnRecordsTotal()?a.oLanguage.sInfoEmpty+a.oLanguage.sInfoPostFix:a.fnRecordsDisplay()===0?a.oLanguage.sInfoEmpty+" "+a.oLanguage.sInfoFiltered.replace("_MAX_",v)+a.oLanguage.sInfoPostFix:a.fnRecordsDisplay()==a.fnRecordsTotal()?a.oLanguage.sInfo.replace("_START_",j).replace("_END_",t).replace("_TOTAL_",K)+a.oLanguage.sInfoPostFix:a.oLanguage.sInfo.replace("_START_",j).replace("_END_",t).replace("_TOTAL_",K)+" "+a.oLanguage.sInfoFiltered.replace("_MAX_",
a.fnFormatNumber(a.fnRecordsTotal()))+a.oLanguage.sInfoPostFix;if(a.oLanguage.fnInfoCallback!==null)j=a.oLanguage.fnInfoCallback(a,e,f,g,p,j);a=a.aanFeatures.i;e=0;for(f=a.length;e<f;e++)d(a[e]).html(j)}}function wa(a){if(a.oScroll.bInfinite)return null;var e='<select size="1" '+(a.sTableId===""?"":'name="'+a.sTableId+'_length"')+">",f,g;if(a.aLengthMenu.length==2&&typeof a.aLengthMenu[0]=="object"&&typeof a.aLengthMenu[1]=="object"){f=0;for(g=a.aLengthMenu[0].length;f<g;f++)e+='<option value="'+
a.aLengthMenu[0][f]+'">'+a.aLengthMenu[1][f]+"</option>"}else{f=0;for(g=a.aLengthMenu.length;f<g;f++)e+='<option value="'+a.aLengthMenu[f]+'">'+a.aLengthMenu[f]+"</option>"}e+="</select>";var p=k.createElement("div");a.sTableId!==""&&typeof a.aanFeatures.l=="undefined"&&p.setAttribute("id",a.sTableId+"_length");p.className=a.oClasses.sLength;p.innerHTML=a.oLanguage.sLengthMenu.replace("_MENU_",e);d('select option[value="'+a._iDisplayLength+'"]',p).attr("selected",true);d("select",p).change(function(){var j=
d(this).val(),t=a.aanFeatures.l;f=0;for(g=t.length;f<g;f++)t[f]!=this.parentNode&&d("select",t[f]).val(j);a._iDisplayLength=parseInt(j,10);Y(a);if(a.fnDisplayEnd()==a.fnRecordsDisplay()){a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength;if(a._iDisplayStart<0)a._iDisplayStart=0}if(a._iDisplayLength==-1)a._iDisplayStart=0;D(a)});return p}function Da(a){var e=k.createElement("div");a.sTableId!==""&&typeof a.aanFeatures.r=="undefined"&&e.setAttribute("id",a.sTableId+"_processing");e.innerHTML=a.oLanguage.sProcessing;
e.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(e,a.nTable);return e}function na(a,e){if(a.oFeatures.bProcessing)for(var f=a.aanFeatures.r,g=0,p=f.length;g<p;g++)f[g].style.visibility=e?"visible":"hidden"}function Ba(a,e){for(var f=-1,g=0;g<a.aoColumns.length;g++){a.aoColumns[g].bVisible===true&&f++;if(f==e)return g}return null}function C(a,e){for(var f=-1,g=0;g<a.aoColumns.length;g++){a.aoColumns[g].bVisible===true&&f++;if(g==e)return a.aoColumns[g].bVisible===true?f:null}return null}
function I(a,e){var f,g;f=a._iDisplayStart;for(g=a._iDisplayEnd;f<g;f++)if(a.aoData[a.aiDisplay[f]].nTr==e)return a.aiDisplay[f];f=0;for(g=a.aoData.length;f<g;f++)if(a.aoData[f].nTr==e)return f;return null}function aa(a){for(var e=0,f=0;f<a.aoColumns.length;f++)a.aoColumns[f].bVisible===true&&e++;return e}function Y(a){a._iDisplayEnd=a.oFeatures.bPaginate===false?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||a._iDisplayLength==-1?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}
function ra(a,e){if(!a||a===null||a==="")return 0;if(typeof e=="undefined")e=k.getElementsByTagName("body")[0];var f,g=k.createElement("div");g.style.width=a;e.appendChild(g);f=g.offsetWidth;e.removeChild(g);return f}function ta(a){var e=0,f,g=0,p=a.aoColumns.length,j,t=d("th",a.nTHead);for(j=0;j<p;j++)if(a.aoColumns[j].bVisible){g++;if(a.aoColumns[j].sWidth!==null){f=ra(a.aoColumns[j].sWidthOrig,a.nTable.parentNode);if(f!==null)a.aoColumns[j].sWidth=W(f);e++}}if(p==t.length&&e===0&&g==p&&a.oScroll.sX===
""&&a.oScroll.sY==="")for(j=0;j<a.aoColumns.length;j++){f=d(t[j]).width();if(f!==null)a.aoColumns[j].sWidth=W(f)}else{e=a.nTable.cloneNode(false);j=k.createElement("tbody");f=k.createElement("tr");e.removeAttribute("id");e.appendChild(a.nTHead.cloneNode(true));if(a.nTFoot!==null){e.appendChild(a.nTFoot.cloneNode(true));ua(function(v){v.style.width=""},e.getElementsByTagName("tr"))}e.appendChild(j);j.appendChild(f);j=d("thead th",e);if(j.length===0)j=d("tbody tr:eq(0)>td",e);j.each(function(v){this.style.width=
"";v=Ba(a,v);if(v!==null&&a.aoColumns[v].sWidthOrig!=="")this.style.width=a.aoColumns[v].sWidthOrig});for(j=0;j<p;j++)if(a.aoColumns[j].bVisible){g=oa(a,j);if(g!==null){g=g.cloneNode(true);f.appendChild(g)}}j=a.nTable.parentNode;j.appendChild(e);if(a.oScroll.sX!==""&&a.oScroll.sXInner!=="")e.style.width=W(a.oScroll.sXInner);else if(a.oScroll.sX!==""){e.style.width="";if(d(e).width()<j.offsetWidth)e.style.width=W(j.offsetWidth)}else if(a.oScroll.sY!=="")e.style.width=W(j.offsetWidth);e.style.visibility=
"hidden";ma(a,e);p=d("tbody tr:eq(0)>td",e);if(p.length===0)p=d("thead tr:eq(0)>th",e);for(j=f=0;j<a.aoColumns.length;j++)if(a.aoColumns[j].bVisible){g=d(p[f]).width();if(g!==null&&g>0)a.aoColumns[j].sWidth=W(g);f++}a.nTable.style.width=W(d(e).outerWidth());e.parentNode.removeChild(e)}}function ma(a,e){if(a.oScroll.sX===""&&a.oScroll.sY!==""){d(e).width();e.style.width=W(d(e).outerWidth()-a.oScroll.iBarWidth)}else if(a.oScroll.sX!=="")e.style.width=W(d(e).outerWidth())}function oa(a,e,f){if(typeof f==
"undefined"||f){f=va(a,e);e=C(a,e);if(f<0)return null;return a.aoData[f].nTr.getElementsByTagName("td")[e]}var g=-1,p,j;f=-1;var t=k.createElement("div");t.style.visibility="hidden";t.style.position="absolute";k.body.appendChild(t);p=0;for(j=a.aoData.length;p<j;p++){t.innerHTML=a.aoData[p]._aData[e];if(t.offsetWidth>g){g=t.offsetWidth;f=p}}k.body.removeChild(t);if(f>=0){e=C(a,e);if(a=a.aoData[f].nTr.getElementsByTagName("td")[e])return a}return null}function va(a,e){for(var f=-1,g=-1,p=0;p<a.aoData.length;p++){var j=
a.aoData[p]._aData[e];if(j.length>f){f=j.length;g=p}}return g}function W(a){if(a===null)return"0px";if(typeof a=="number"){if(a<0)return"0px";return a+"px"}if(a.indexOf("em")!=-1||a.indexOf("%")!=-1||a.indexOf("ex")!=-1||a.indexOf("px")!=-1)return a;return a+"px"}function Fa(a){for(var e=n.aTypes,f=e.length,g=0;g<f;g++){var p=e[g](a);if(p!==null)return p}return"string"}function ha(a){for(var e=0;e<q.length;e++)if(q[e].nTable==a)return q[e];return null}function Ca(a){for(var e=[],f=a.aoData.length,
g=0;g<f;g++)e.push(a.aoData[g]._aData);return e}function za(a){for(var e=[],f=a.aoData.length,g=0;g<f;g++)e.push(a.aoData[g].nTr);return e}function Ea(a){var e=za(a),f=[],g,p=[],j,t,v,K;j=0;for(t=e.length;j<t;j++){f=[];v=0;for(K=e[j].childNodes.length;v<K;v++){g=e[j].childNodes[v];g.nodeName.toUpperCase()=="TD"&&f.push(g)}v=g=0;for(K=a.aoColumns.length;v<K;v++)if(a.aoColumns[v].bVisible)p.push(f[v-g]);else{p.push(a.aoData[j]._anHidden[v]);g++}}return p}function Ja(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^)",
"g"),"\\$1")}function Ka(a,e){for(var f=-1,g=0,p=a.length;g<p;g++)if(a[g]==e)f=g;else a[g]>e&&a[g]--;f!=-1&&a.splice(f,1)}function Pa(a,e){for(var f=e.split(","),g=[],p=0,j=a.aoColumns.length;p<j;p++)for(var t=0;t<j;t++)if(a.aoColumns[p].sName==f[t]){g.push(t);break}return g}function Ga(a){for(var e="",f=0,g=a.aoColumns.length;f<g;f++)e+=a.aoColumns[f].sName+",";if(e.length==g)return"";return e.slice(0,-1)}function pa(a,e,f){a=a.sTableId===""?"DataTables warning: "+f:"DataTables warning (table id = '"+
a.sTableId+"'): "+f;if(e===0)if(n.sErrMode=="alert")alert(a);else throw a;else typeof console!="undefined"&&typeof console.log!="undefined"&&console.log(a)}function Ha(a){a.aoData.splice(0,a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);Y(a)}function La(a){if(!(!a.oFeatures.bStateSave||typeof a.bDestroying!="undefined")){var e,f="{";f+='"iCreate":'+(new Date).getTime()+",";f+='"iStart":'+a._iDisplayStart+",";f+='"iEnd":'+a._iDisplayEnd+
",";f+='"iLength":'+a._iDisplayLength+",";f+='"sFilter":"'+encodeURIComponent(a.oPreviousSearch.sSearch)+'",';f+='"sFilterEsc":'+!a.oPreviousSearch.bRegex+",";f+='"aaSorting":[ ';for(e=0;e<a.aaSorting.length;e++)f+="["+a.aaSorting[e][0]+',"'+a.aaSorting[e][1]+'"],';f=f.substring(0,f.length-1);f+="],";f+='"aaSearchCols":[ ';for(e=0;e<a.aoPreSearchCols.length;e++)f+='["'+encodeURIComponent(a.aoPreSearchCols[e].sSearch)+'",'+!a.aoPreSearchCols[e].bRegex+"],";f=f.substring(0,f.length-1);f+="],";f+='"abVisCols":[ ';
for(e=0;e<a.aoColumns.length;e++)f+=a.aoColumns[e].bVisible+",";f=f.substring(0,f.length-1);f+="]";f+="}";Qa(a.sCookiePrefix+a.sInstance,f,a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)}}function Ra(a,e){if(a.oFeatures.bStateSave){var f,g=Ma(a.sCookiePrefix+a.sInstance);if(g!==null&&g!==""){try{f=typeof d.parseJSON=="function"?d.parseJSON(g.replace(/'/g,'"')):eval("("+g+")")}catch(p){return}a._iDisplayStart=f.iStart;a.iInitDisplayStart=f.iStart;a._iDisplayEnd=f.iEnd;a._iDisplayLength=f.iLength;
a.oPreviousSearch.sSearch=decodeURIComponent(f.sFilter);a.aaSorting=f.aaSorting.slice();a.saved_aaSorting=f.aaSorting.slice();if(typeof f.sFilterEsc!="undefined")a.oPreviousSearch.bRegex=!f.sFilterEsc;if(typeof f.aaSearchCols!="undefined")for(g=0;g<f.aaSearchCols.length;g++)a.aoPreSearchCols[g]={sSearch:decodeURIComponent(f.aaSearchCols[g][0]),bRegex:!f.aaSearchCols[g][1]};if(typeof f.abVisCols!="undefined"){e.saved_aoColumns=[];for(g=0;g<f.abVisCols.length;g++){e.saved_aoColumns[g]={};e.saved_aoColumns[g].bVisible=
f.abVisCols[g]}}}}}function Qa(a,e,f,g,p){var j=new Date;j.setTime(j.getTime()+f*1E3);f=l.location.pathname.split("/");a=a+"_"+f.pop().replace(/[\/:]/g,"").toLowerCase();var t;if(p!==null){t=typeof d.parseJSON=="function"?d.parseJSON(e):eval("("+e+")");e=p(a,t,j.toGMTString(),f.join("/")+"/")}else e=a+"="+encodeURIComponent(e)+"; expires="+j.toGMTString()+"; path="+f.join("/")+"/";p="";j=9999999999999;if((Ma(a)!==null?k.cookie.length:e.length+k.cookie.length)+10>4096){a=k.cookie.split(";");for(var v=
0,K=a.length;v<K;v++)if(a[v].indexOf(g)!=-1){var N=a[v].split("=");try{t=eval("("+decodeURIComponent(N[1])+")")}catch(T){continue}if(typeof t.iCreate!="undefined"&&t.iCreate<j){p=N[0];j=t.iCreate}}if(p!=="")k.cookie=p+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+f.join("/")+"/"}k.cookie=e}function Ma(a){var e=l.location.pathname.split("/");a=a+"_"+e[e.length-1].replace(/[\/:]/g,"").toLowerCase()+"=";e=k.cookie.split(";");for(var f=0;f<e.length;f++){for(var g=e[f];g.charAt(0)==" ";)g=g.substring(1,
g.length);if(g.indexOf(a)===0)return decodeURIComponent(g.substring(a.length,g.length))}return null}function Ia(a){a=a.getElementsByTagName("tr");if(a.length==1)return a[0].getElementsByTagName("th");var e=[],f=[],g,p,j,t,v,K,N=function(ka,Ua,Na){for(;typeof ka[Ua][Na]!="undefined";)Na++;return Na},T=function(ka){if(typeof e[ka]=="undefined")e[ka]=[]};g=0;for(t=a.length;g<t;g++){T(g);var X=0,la=[];p=0;for(v=a[g].childNodes.length;p<v;p++)if(a[g].childNodes[p].nodeName.toUpperCase()=="TD"||a[g].childNodes[p].nodeName.toUpperCase()==
"TH")la.push(a[g].childNodes[p]);p=0;for(v=la.length;p<v;p++){var qa=la[p].getAttribute("colspan")*1,ea=la[p].getAttribute("rowspan")*1;if(!qa||qa===0||qa===1){K=N(e,g,X);e[g][K]=la[p].nodeName.toUpperCase()=="TD"?4:la[p];if(ea||ea===0||ea===1)for(j=1;j<ea;j++){T(g+j);e[g+j][K]=2}X++}else{K=N(e,g,X);for(j=0;j<qa;j++)e[g][K+j]=3;X+=qa}}}g=0;for(t=e.length;g<t;g++){p=0;for(v=e[g].length;p<v;p++)if(typeof e[g][p]=="object")f[p]=e[g][p]}return f}function Sa(){var a=k.createElement("p"),e=a.style;e.width=
"100%";e.height="200px";var f=k.createElement("div");e=f.style;e.position="absolute";e.top="0px";e.left="0px";e.visibility="hidden";e.width="200px";e.height="150px";e.overflow="hidden";f.appendChild(a);k.body.appendChild(f);e=a.offsetWidth;f.style.overflow="scroll";a=a.offsetWidth;if(e==a)a=f.clientWidth;k.body.removeChild(f);return e-a}function ua(a,e,f){for(var g=0,p=e.length;g<p;g++)for(var j=0,t=e[g].childNodes.length;j<t;j++)if(e[g].childNodes[j].nodeType==1)typeof f!="undefined"?a(e[g].childNodes[j],
f[g].childNodes[j]):a(e[g].childNodes[j])}function P(a,e,f,g){if(typeof g=="undefined")g=f;if(typeof e[f]!="undefined")a[g]=e[f]}this.oApi={};this.fnDraw=function(a){var e=ha(this[n.iApiIndex]);if(typeof a!="undefined"&&a===false){Y(e);D(e)}else S(e)};this.fnFilter=function(a,e,f,g,p){var j=ha(this[n.iApiIndex]);if(j.oFeatures.bFilter){if(typeof f=="undefined")f=false;if(typeof g=="undefined")g=true;if(typeof p=="undefined")p=true;if(typeof e=="undefined"||e===null){ba(j,{sSearch:a,bRegex:f,bSmart:g},
1);if(p&&typeof j.aanFeatures.f!="undefined"){e=j.aanFeatures.f;f=0;for(g=e.length;f<g;f++)d("input",e[f]).val(a)}}else{j.aoPreSearchCols[e].sSearch=a;j.aoPreSearchCols[e].bRegex=f;j.aoPreSearchCols[e].bSmart=g;ba(j,j.oPreviousSearch,1)}}};this.fnSettings=function(){return ha(this[n.iApiIndex])};this.fnVersionCheck=n.fnVersionCheck;this.fnSort=function(a){var e=ha(this[n.iApiIndex]);e.aaSorting=a;O(e)};this.fnSortListener=function(a,e,f){R(ha(this[n.iApiIndex]),a,e,f)};this.fnAddData=function(a,e){if(a.length===
0)return[];var f=[],g,p=ha(this[n.iApiIndex]);if(typeof a[0]=="object")for(var j=0;j<a.length;j++){g=A(p,a[j]);if(g==-1)return f;f.push(g)}else{g=A(p,a);if(g==-1)return f;f.push(g)}p.aiDisplay=p.aiDisplayMaster.slice();u(p,1);if(typeof e=="undefined"||e)S(p);return f};this.fnDeleteRow=function(a,e,f){var g=ha(this[n.iApiIndex]);a=typeof a=="object"?I(g,a):a;var p=g.aoData.splice(a,1);Ka(g.aiDisplayMaster,a);Ka(g.aiDisplay,a);u(g,1);typeof e=="function"&&e.call(this,g,p);if(g._iDisplayStart>=g.aiDisplay.length){g._iDisplayStart-=
g._iDisplayLength;if(g._iDisplayStart<0)g._iDisplayStart=0}if(typeof f=="undefined"||f){Y(g);D(g)}return p};this.fnClearTable=function(a){var e=ha(this[n.iApiIndex]);Ha(e);if(typeof a=="undefined"||a)D(e)};this.fnOpen=function(a,e,f){var g=ha(this[n.iApiIndex]);this.fnClose(a);var p=k.createElement("tr"),j=k.createElement("td");p.appendChild(j);j.className=f;j.colSpan=aa(g);j.innerHTML=e;e=d("tr",g.nTBody);d.inArray(a,e)!=-1&&d(p).insertAfter(a);g.aoOpenRows.push({nTr:p,nParent:a});return p};this.fnClose=
function(a){for(var e=ha(this[n.iApiIndex]),f=0;f<e.aoOpenRows.length;f++)if(e.aoOpenRows[f].nParent==a){(a=e.aoOpenRows[f].nTr.parentNode)&&a.removeChild(e.aoOpenRows[f].nTr);e.aoOpenRows.splice(f,1);return 0}return 1};this.fnGetData=function(a){var e=ha(this[n.iApiIndex]);if(typeof a!="undefined"){a=typeof a=="object"?I(e,a):a;return e.aoData[a]._aData}return Ca(e)};this.fnGetNodes=function(a){var e=ha(this[n.iApiIndex]);if(typeof a!="undefined")return e.aoData[a].nTr;return za(e)};this.fnGetPosition=
function(a){var e=ha(this[n.iApiIndex]);if(a.nodeName.toUpperCase()=="TR")return I(e,a);else if(a.nodeName.toUpperCase()=="TD")for(var f=I(e,a.parentNode),g=0,p=0;p<e.aoColumns.length;p++)if(e.aoColumns[p].bVisible){if(e.aoData[f].nTr.getElementsByTagName("td")[p-g]==a)return[f,p-g,p]}else g++;return null};this.fnUpdate=function(a,e,f,g,p){var j=ha(this[n.iApiIndex]),t=typeof e=="object"?I(j,e):e;if(typeof a!="object"){e=a;j.aoData[t]._aData[f]=e;if(j.aoColumns[f].fnRender!==null){e=j.aoColumns[f].fnRender({iDataRow:t,
iDataColumn:f,aData:j.aoData[t]._aData,oSettings:j});if(j.aoColumns[f].bUseRendered)j.aoData[t]._aData[f]=e}f=C(j,f);if(f!==null)j.aoData[t].nTr.getElementsByTagName("td")[f].innerHTML=e}else{if(a.length!=j.aoColumns.length){pa(j,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+j.aoColumns.length);return 1}for(var v=0;v<a.length;v++){e=a[v];j.aoData[t]._aData[v]=e;if(j.aoColumns[v].fnRender!==null){e=j.aoColumns[v].fnRender({iDataRow:t,
iDataColumn:v,aData:j.aoData[t]._aData,oSettings:j});if(j.aoColumns[v].bUseRendered)j.aoData[t]._aData[v]=e}f=C(j,v);if(f!==null)j.aoData[t].nTr.getElementsByTagName("td")[f].innerHTML=e}}if(typeof p=="undefined"||p){u(j,1);ga(j)}if(typeof g=="undefined"||g)S(j);return 0};this.fnSetColumnVis=function(a,e){var f=ha(this[n.iApiIndex]),g,p;p=f.aoColumns.length;var j,t;if(f.aoColumns[a].bVisible!=e){j=d(">tr",f.nTHead)[0];var v=d(">tr",f.nTFoot)[0],K=[],N=[];for(g=0;g<p;g++){K.push(f.aoColumns[g].nTh);
N.push(f.aoColumns[g].nTf)}if(e){var T=0;for(g=0;g<a;g++)f.aoColumns[g].bVisible&&T++;if(T>=aa(f)){j.appendChild(K[a]);v&&v.appendChild(N[a]);g=0;for(p=f.aoData.length;g<p;g++){j=f.aoData[g]._anHidden[a];f.aoData[g].nTr.appendChild(j)}}else{for(g=a;g<p;g++){t=C(f,g);if(t!==null)break}j.insertBefore(K[a],j.getElementsByTagName("th")[t]);v&&v.insertBefore(N[a],v.getElementsByTagName("th")[t]);Ea(f);g=0;for(p=f.aoData.length;g<p;g++){j=f.aoData[g]._anHidden[a];f.aoData[g].nTr.insertBefore(j,d(">td:eq("+
t+")",f.aoData[g].nTr)[0])}}f.aoColumns[a].bVisible=true}else{j.removeChild(K[a]);v&&v.removeChild(N[a]);t=Ea(f);g=0;for(p=f.aoData.length;g<p;g++){j=t[g*f.aoColumns.length+a*1];f.aoData[g]._anHidden[a]=j;j.parentNode.removeChild(j)}f.aoColumns[a].bVisible=false}g=0;for(p=f.aoOpenRows.length;g<p;g++)f.aoOpenRows[g].nTr.colSpan=aa(f);ga(f);D(f);La(f)}};this.fnPageChange=function(a,e){var f=ha(this[n.iApiIndex]);Aa(f,a);Y(f);if(typeof e=="undefined"||e)D(f)};this.fnDestroy=function(){var a=ha(this[n.iApiIndex]),
e=a.nTableWrapper.parentNode,f=a.nTBody,g,p;a.bDestroying=true;g=0;for(p=a.aoColumns.length;g<p;g++)a.aoColumns[g].bVisible===false&&this.fnSetColumnVis(g,true);d("tbody>tr>td."+a.oClasses.sRowEmpty,a.nTable).parent().remove();if(a.nTable!=a.nTHead.parentNode){d(">thead",a.nTable).remove();a.nTable.appendChild(a.nTHead)}if(a.nTFoot&&a.nTable!=a.nTFoot.parentNode){d(">tfoot",a.nTable).remove();a.nTable.appendChild(a.nTFoot)}a.nTable.parentNode.removeChild(a.nTable);d(a.nTableWrapper).remove();a.aaSorting=
[];a.aaSortingFixed=[];Z(a);d(za(a)).removeClass(a.asStripClasses.join(" "));if(a.bJUI){d("th",a.nTHead).removeClass([n.oStdClasses.sSortable,n.oJUIClasses.sSortableAsc,n.oJUIClasses.sSortableDesc,n.oJUIClasses.sSortableNone].join(" "));d("th span",a.nTHead).remove()}else d("th",a.nTHead).removeClass([n.oStdClasses.sSortable,n.oStdClasses.sSortableAsc,n.oStdClasses.sSortableDesc,n.oStdClasses.sSortableNone].join(" "));e.appendChild(a.nTable);g=0;for(p=a.aoData.length;g<p;g++)f.appendChild(a.aoData[g].nTr);
a.nTable.style.width=W(a.sDestroyWidth);d(">tr:even",f).addClass(a.asDestoryStrips[0]);d(">tr:odd",f).addClass(a.asDestoryStrips[1]);g=0;for(p=q.length;g<p;g++)q[g]==a&&q.splice(g,1)};this.fnAdjustColumnSizing=function(a){ga(ha(this[n.iApiIndex]));if(typeof a=="undefined"||a)this.fnDraw(false)};for(var Oa in n.oApi)if(Oa)this[Oa]=z(Oa);this.oApi._fnExternApiFunc=z;this.oApi._fnInitalise=B;this.oApi._fnLanguageProcess=F;this.oApi._fnAddColumn=J;this.oApi._fnColumnOptions=M;this.oApi._fnAddData=A;this.oApi._fnGatherData=
L;this.oApi._fnDrawHead=Q;this.oApi._fnDraw=D;this.oApi._fnReDraw=S;this.oApi._fnAjaxUpdate=ia;this.oApi._fnAjaxUpdateDraw=fa;this.oApi._fnAddOptionsHtml=w;this.oApi._fnFeatureHtmlTable=V;this.oApi._fnScrollDraw=U;this.oApi._fnAjustColumnSizing=ga;this.oApi._fnFeatureHtmlFilter=ja;this.oApi._fnFilterComplete=ba;this.oApi._fnFilterCustom=da;this.oApi._fnFilterColumn=ca;this.oApi._fnFilter=o;this.oApi._fnBuildSearchArray=u;this.oApi._fnFilterCreateSearch=E;this.oApi._fnDataToSearch=H;this.oApi._fnSort=
O;this.oApi._fnSortAttachListener=R;this.oApi._fnSortingClasses=Z;this.oApi._fnFeatureHtmlPaginate=sa;this.oApi._fnPageChange=Aa;this.oApi._fnFeatureHtmlInfo=xa;this.oApi._fnUpdateInfo=ya;this.oApi._fnFeatureHtmlLength=wa;this.oApi._fnFeatureHtmlProcessing=Da;this.oApi._fnProcessingDisplay=na;this.oApi._fnVisibleToColumnIndex=Ba;this.oApi._fnColumnIndexToVisible=C;this.oApi._fnNodeToDataIndex=I;this.oApi._fnVisbleColumns=aa;this.oApi._fnCalculateEnd=Y;this.oApi._fnConvertToWidth=ra;this.oApi._fnCalculateColumnWidths=
ta;this.oApi._fnScrollingWidthAdjust=ma;this.oApi._fnGetWidestNode=oa;this.oApi._fnGetMaxLenString=va;this.oApi._fnStringToCss=W;this.oApi._fnArrayCmp=function(a,e){if(a.length!=e.length)return 1;for(var f=0;f<a.length;f++)if(a[f]!=e[f])return 2;return 0};this.oApi._fnDetectType=Fa;this.oApi._fnSettingsFromNode=ha;this.oApi._fnGetDataMaster=Ca;this.oApi._fnGetTrNodes=za;this.oApi._fnGetTdNodes=Ea;this.oApi._fnEscapeRegex=Ja;this.oApi._fnDeleteIndex=Ka;this.oApi._fnReOrderIndex=Pa;this.oApi._fnColumnOrdering=
Ga;this.oApi._fnLog=pa;this.oApi._fnClearTable=Ha;this.oApi._fnSaveState=La;this.oApi._fnLoadState=Ra;this.oApi._fnCreateCookie=Qa;this.oApi._fnReadCookie=Ma;this.oApi._fnGetUniqueThs=Ia;this.oApi._fnScrollBarWidth=Sa;this.oApi._fnApplyToChildren=ua;this.oApi._fnMap=P;var Ta=this;return this.each(function(){var a=0,e,f,g,p;a=0;for(e=q.length;a<e;a++){if(q[a].nTable==this)if(typeof h=="undefined"||typeof h.bRetrieve!="undefined"&&h.bRetrieve===true)return q[a].oInstance;else if(typeof h.bDestroy!=
"undefined"&&h.bDestroy===true){q[a].oInstance.fnDestroy();break}else{pa(q[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}if(q[a].sTableId!==""&&q[a].sTableId==this.getAttribute("id")){q.splice(a,
1);break}}var j=new s;q.push(j);var t=false,v=false;a=this.getAttribute("id");if(a!==null){j.sTableId=a;j.sInstance=a}else j.sInstance=n._oExternConfig.iNextUnique++;if(this.nodeName.toLowerCase()!="table")pa(j,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{j.oInstance=Ta;j.nTable=this;j.oApi=Ta.oApi;j.sDestroyWidth=d(this).width();if(typeof h!="undefined"&&h!==null){j.oInit=h;P(j.oFeatures,h,"bPaginate");P(j.oFeatures,h,"bLengthChange");P(j.oFeatures,
h,"bFilter");P(j.oFeatures,h,"bSort");P(j.oFeatures,h,"bInfo");P(j.oFeatures,h,"bProcessing");P(j.oFeatures,h,"bAutoWidth");P(j.oFeatures,h,"bSortClasses");P(j.oFeatures,h,"bServerSide");P(j.oScroll,h,"sScrollX","sX");P(j.oScroll,h,"sScrollXInner","sXInner");P(j.oScroll,h,"sScrollY","sY");P(j.oScroll,h,"bScrollCollapse","bCollapse");P(j.oScroll,h,"bScrollInfinite","bInfinite");P(j.oScroll,h,"iScrollLoadGap","iLoadGap");P(j,h,"asStripClasses");P(j,h,"fnRowCallback");P(j,h,"fnHeaderCallback");P(j,h,
"fnFooterCallback");P(j,h,"fnCookieCallback");P(j,h,"fnInitComplete");P(j,h,"fnServerData");P(j,h,"fnFormatNumber");P(j,h,"aaSorting");P(j,h,"aaSortingFixed");P(j,h,"aLengthMenu");P(j,h,"sPaginationType");P(j,h,"sAjaxSource");P(j,h,"iCookieDuration");P(j,h,"sCookiePrefix");P(j,h,"sDom");P(j,h,"oSearch","oPreviousSearch");P(j,h,"aoSearchCols","aoPreSearchCols");P(j,h,"iDisplayLength","_iDisplayLength");P(j,h,"bJQueryUI","bJUI");P(j.oLanguage,h,"fnInfoCallback");typeof h.fnDrawCallback=="function"&&
j.aoDrawCallback.push({fn:h.fnDrawCallback,sName:"user"});j.oFeatures.bServerSide&&j.oFeatures.bSort&&j.oFeatures.bSortClasses&&j.aoDrawCallback.push({fn:Z,sName:"server_side_sort_classes"});if(typeof h.bJQueryUI!="undefined"&&h.bJQueryUI){j.oClasses=n.oJUIClasses;if(typeof h.sDom=="undefined")j.sDom='<"H"lfr>t<"F"ip>'}if(j.oScroll.sX!==""||j.oScroll.sY!=="")j.oScroll.iBarWidth=Sa();if(typeof h.iDisplayStart!="undefined"&&typeof j.iInitDisplayStart=="undefined"){j.iInitDisplayStart=h.iDisplayStart;
j._iDisplayStart=h.iDisplayStart}if(typeof h.bStateSave!="undefined"){j.oFeatures.bStateSave=h.bStateSave;Ra(j,h);j.aoDrawCallback.push({fn:La,sName:"state_save"})}if(typeof h.aaData!="undefined")v=true;if(typeof h!="undefined"&&typeof h.aoData!="undefined")h.aoColumns=h.aoData;if(typeof h.oLanguage!="undefined")if(typeof h.oLanguage.sUrl!="undefined"&&h.oLanguage.sUrl!==""){j.oLanguage.sUrl=h.oLanguage.sUrl;d.getJSON(j.oLanguage.sUrl,null,function(T){F(j,T,true)});t=true}else F(j,h.oLanguage,false)}else h=
{};if(typeof h.asStripClasses=="undefined"){j.asStripClasses.push(j.oClasses.sStripOdd);j.asStripClasses.push(j.oClasses.sStripEven)}f=false;g=d("tbody>tr",this);a=0;for(e=j.asStripClasses.length;a<e;a++)if(g.filter(":lt(2)").hasClass(j.asStripClasses[a])){f=true;break}if(f){j.asDestoryStrips=["",""];if(d(g[0]).hasClass(j.oClasses.sStripOdd))j.asDestoryStrips[0]+=j.oClasses.sStripOdd+" ";if(d(g[0]).hasClass(j.oClasses.sStripEven))j.asDestoryStrips[0]+=j.oClasses.sStripEven;if(d(g[1]).hasClass(j.oClasses.sStripOdd))j.asDestoryStrips[1]+=
j.oClasses.sStripOdd+" ";if(d(g[1]).hasClass(j.oClasses.sStripEven))j.asDestoryStrips[1]+=j.oClasses.sStripEven;g.removeClass(j.asStripClasses.join(" "))}a=this.getElementsByTagName("thead");f=a.length===0?[]:Ia(a[0]);var K;if(typeof h.aoColumns=="undefined"){K=[];a=0;for(e=f.length;a<e;a++)K.push(null)}else K=h.aoColumns;a=0;for(e=K.length;a<e;a++){if(typeof h.saved_aoColumns!="undefined"&&h.saved_aoColumns.length==e){if(K[a]===null)K[a]={};K[a].bVisible=h.saved_aoColumns[a].bVisible}J(j,f?f[a]:
null)}if(typeof h.aoColumnDefs!="undefined")for(a=h.aoColumnDefs.length-1;a>=0;a--){var N=h.aoColumnDefs[a].aTargets;f=0;for(g=N.length;f<g;f++)if(typeof N[f]=="number"&&N[f]>=0){for(;j.aoColumns.length<=N[f];)J(j);M(j,N[f],h.aoColumnDefs[a])}else if(typeof N[f]=="number"&&N[f]<0)M(j,j.aoColumns.length+N[f],h.aoColumnDefs[a]);else if(typeof N[f]=="string"){e=0;for(p=j.aoColumns.length;e<p;e++)if(N[f]=="_all"||j.aoColumns[e].nTh.className.indexOf(N[f])!=-1)M(j,e,h.aoColumnDefs[a])}}if(typeof K!="undefined"){a=
0;for(e=K.length;a<e;a++)M(j,a,K[a])}a=0;for(e=j.aaSorting.length;a<e;a++){K=j.aoColumns[j.aaSorting[a][0]];if(typeof j.aaSorting[a][2]=="undefined")j.aaSorting[a][2]=0;if(typeof h.aaSorting=="undefined"&&typeof j.saved_aaSorting=="undefined")j.aaSorting[a][1]=K.asSorting[0];f=0;for(g=K.asSorting.length;f<g;f++)if(j.aaSorting[a][1]==K.asSorting[f]){j.aaSorting[a][2]=f;break}}this.getElementsByTagName("thead").length===0&&this.appendChild(k.createElement("thead"));this.getElementsByTagName("tbody").length===
0&&this.appendChild(k.createElement("tbody"));j.nTHead=this.getElementsByTagName("thead")[0];j.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0)j.nTFoot=this.getElementsByTagName("tfoot")[0];if(v)for(a=0;a<h.aaData.length;a++)A(j,h.aaData[a]);else L(j);j.aiDisplay=j.aiDisplayMaster.slice();j.bInitialised=true;t===false&&B(j)}})}})(jQuery,window,document);var bounds={CD:null,US:null},defColor={CD:{Sel:"#3b5998",Out:"#666666",Blk:"#d4dae8"},US:{Sel:"#3b5998",Out:"#666666",Blk:"#ffffff"}},hoverStats=null;function addCommas(d){d+="";x=d.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";for(d=/(\d+)(\d{3})/;d.test(x1);)x1=x1.replace(d,"$1,$2");return x1+x2}
function setVal(d){$(".mapOverlay").remove();if(d==null)d=$.data($("#map")[0],"params");if(d!=null){params=$.data($("#map")[0],"params");start={year:$("#yrRg").html()};$.extend(start,{agency:$("#agency").val()});$.extend(params,d);$.extend(d,params);$.extend(d,start);valN={};$($.keys(d)).each(function(l,k){if(d[k]!=null)valN[k]=d[k]});$.data($("#map")[0],"params",valN);hoverStats==null&&$.getJSON("api/hover.stats.php",valN,function(l){hoverStats=l;mapToolTip("")});refreshGeo();init||createDataTable({})}}
function maxItem(){this.max=0;this.id="";this.keys={};this.add=function(d){this.keys[d]=this.keys[d]==null?1:this.keys[d]+1;this.max=Math.max(this.keys[d],this.max);this.id=this.keys[d]==this.max?d:this.id};this.ranked=[];this.status=function(){alert(this.id+":"+this.max)};this.sort=function(){for(y in this.keys)this.ranked.push([parseInt(this.keys[y]),y]);this.ranked.sort(function(d,l){return d[0]-l[0]}).reverse();return this.ranked}}
function dict(d){var l=this.fetch={};d!=null&&$(d.split("/")).each(function(k,q){r=q.split("~");l[r[0]]=r.length==1?1:parseInt(r[1])});this.fetch=l;this.add=function(k){k!=null&&$(k.split("/")).each(function(q,n){r=n.split("~");l[r[0]]=(l[r[0]]==null?0:l[r[0]])+(r.length==1?1:parseInt(r[1]))});this.fetch=l};this.ranked=[];this.sort=function(){for(y in this.fetch)this.ranked.push([y,parseInt(this.fetch[y])]);this.ranked.sort(function(k,q){return k[1]-q[1]}).reverse()}}
function showChecked(d,l){var k=[];$(d).parent().children("input"+l).each(function(){k.push(this.id)});return k}$.extend({keys:function(d){var l=[];$.each(d,function(k){l.push(k)});return l}});
$.extend({URLEncode:function(d){var l="",k=0;d=d.toString();for(var q=/(^[a-zA-Z0-9_.]*)/;k<d.length;){var n=q.exec(d.substr(k));if(n!=null&&n.length>1&&n[1]!=""){l+=n[1];k+=n[1].length}else{if(d[k]==" ")l+="+";else{n=d.charCodeAt(k).toString(16);l+="%"+(n.length<2?"0":"")+n.toUpperCase()}k++}}return l},URLDecode:function(d){d=d;for(var l,k=/(%[^%]{2})/;(m=k.exec(d))!=null&&m.length>1&&m[1]!="";){b=parseInt(m[1].substr(1),16);l=String.fromCharCode(b);d=d.replace(m[1],l)}return d}});
function getOverlayView(d){var l=new G.OverlayView;l.onAdd=function(){};l.draw=function(){};l.onRemove=function(){};l.setMap(d);return l}markerOverFunction=function(d,l){return function(){getOverlayView(map).getProjection().fromLatLngToDivPixel(l).x-=d.size;cObj=new maxItem;$(d).each(function(){cObj.add([d.block.AsgNum,d.col])})}};function clearClusters(d){d.preventDefault();d.stopPropagation();markerClusterer.clearMarkers()}
function createDataTable(d){vals=$.data($("#map")[0],"params");$("#example_wrapper").children().detach();table=$('<table cellspacing="0" cellpadding="0" id="example"></table>');th=[];if(vals.table=="grant"){thsize=[4,8,6,6,16,24,22,10,4];labels=["Year","Grant Number","Federal Agency","Grant Amount","Receiving Institution","Description","Topic","City","State"];XInner="250%";aaSort=[[0,"desc"],[3,"desc"]]}else if(vals.table=="pat"){thsize=[6,6,14,30,6,24,10,4];labels=["Patent Number","Federal Agency",
"Institution/Company Name","Description","Date Applied","Technology Class","City","State"];XInner="250%";aaSort=[[4,"desc"],[1,"asc"]]}else if(vals.table=="app"){thsize=[10,10,20,10,30,10,10];labels=["Patent Number","Federal Agency","Institution/Company Name","Date Applied","Technology Class","City","State"];XInner="200%";aaSort=[[3,"desc"],[1,"asc"]]}else if(vals.table=="pub"){thsize=[6,8,8,8,10,20,16,6,12,6];labels=["Year","Publication Number","Grant Number","Federal Agency","Receiving Institution",
"Title","Journal","Publication Year","City","State"];XInner="250%";aaSort=[[0,"desc"]]}$(labels).each(function(l,k){th.push("<th width='"+thsize[l]+"%'>"+k+"<br/></th>")});table.append("<thead><tr>"+th.join("")+"</tr></thead>");table.append("<tbody></tbody>");table.append("<tfoot><tr><th></th></tr></tfoot>");if(!(vals.State==null&&vals.CD==null)){$("#polyselect").val(vals.CD=="0"?vals.State:vals.State+"-"+vals.CD);params=[];$.each(vals,function(l,k){k!=null&&params.push("<input type='hidden' name='"+
l+"' value='"+k+"' />")});$.each(d,function(l,k){k!=null&&params.push("<input type='hidden' name='"+l+"' value='"+k+"' />")});params.push("<input type='hidden' name='mode' value='csv' />");if(vals.State!=""){action='$("#download").submit();';$("#downloadcsv").html("<form action='api/data.php' method='post' id='download'>"+params.join("")+"<a onclick='javascript: "+action+"'>Download selected data as CSV</a></form>");$("#example_wrapper").css("min-height","675px");$("#example_wrapper").html("<br/><br/>");
$("#example_wrapper").append(table);$("#example").dataTable({aaSorting:aaSort,sDom:'<"H"flr>t<"F"ip>',iDisplayLength:100,sScrollY:"500px",sScrollX:"100%",sScrollXInner:XInner,bLengthChange:true,bJQueryUI:true,bProcessing:true,bServerSide:true,bRetrieve:true,sAjaxSource:"api/data.php",fnServerData:function(l,k,q){$($.keys(vals)).each(function(n,h){vals[h]!=null&&k.push({name:h,value:vals[h]})});$($.keys(d)).each(function(n,h){d[h]!=null&&k.push({name:h,value:d[h]})});$.ajax({url:l,data:k,dataType:"json",
type:"POST",success:function(n){q(n)}})}})}}}
function initializeGeo(d){map=new G.Map($(d).get(0),{navigationControlOptions:{style:G.NavigationControlStyle.ZOOM_PAN},disableDoubleClickZoom:true,streetViewControl:false,mapTypeControlOptions:{style:G.MapTypeControlStyle.DROPDOWN_MENU,mapTypeIds:["Blank",G.MapTypeId.ROADMAP,G.MapTypeId.HYBRID,G.MapTypeId.SATELLITE,G.MapTypeId.TERRAIN]}});map.mapTypes.set("Blank",new G.StyledMapType([{featureType:"all",elementType:"all",stylers:[{visibility:"off"},{lightness:50},{hue:"#0000ff"}]}],{name:"Blank"}));
map.setMapTypeId(G.MapTypeId.TERRAIN);G.event.addListener(map,"maptypeid_changed",function(){setVal()});d=$("<div></div>").get(0);$(d).append($("<div></div>").addClass("control").html("Highlight selected area"));G.event.addDomListener(d,"click",function(){GoPan(true)});d.index=1;map.controls[G.ControlPosition.TOP_RIGHT].push(d);d=$("<div></div>").get(0);$(d).append($("<div></div>").addClass("control").html("USA View"));G.event.addDomListener(d,"click",function(){map.setZoom(4);map.panTo(new G.LatLng(38.115320836,
-96.6304735))});d.index=1;map.controls[G.ControlPosition.TOP_RIGHT].push(d);map.enableKeyDragZoom({key:"shift",boxStyle:{border:"5px solid #999999",backgroundColor:"#ffffff",opacity:0.4},veilStyle:{backgroundColor:"#d4dae8",opacity:0.8}});map.setZoom(4);map.setCenter(new G.LatLng(38.115320836,-96.6304735))}
function refresher(d){markerClusterer!=null&&markerClusterer.clearMarkers();kml!=null&&kml.setMap(null);prevLine!=null&&prevLine.setMap(null);if(bounds.CD==null&&d.CD!=null)loadBound("CD");else bounds.US==null&&loadBound("US")}
function GoPan(d){params=$.data($("#map")[0],"params");if(params.CD==null){map.setZoom(4);map.panTo(new G.LatLng(38.115320836,-96.6304735))}else{fitBd=new G.LatLngBounds;for(var l=0;l<bounds.US.length;l++)params.State==bounds.US[l].marks[0]&&bounds.US[l].getPath().forEach(function(k){fitBd.extend(k)});d?map.fitBounds(fitBd):map.panTo(fitBd.getCenter())}}
function loadBound(d){params=$.data($("#map")[0],"params");if(d=="CD"){fitBd=new G.LatLngBounds;jsonFile="kml/json/"+params.State+"-cd.json";GoPan(true)}else{if(d=="US")jsonFile="kml/json/USA.json";bounds[d]=[];$.getJSON(jsonFile,function(l){params=$.data($("#map")[0],"params");for(var k=0;k<l.coords.length;k++)for(var q=0;q<l.coords[k].length;q++){coords=[];for(var n=0;n<l.coords[k][q].length;n++)coords.push(new G.LatLng(parseFloat(l.coords[k][q][n][1]),parseFloat(l.coords[k][q][n][0])));n=l.marks[k].join("-")==
params.State+"-"+params.CD;var h=new G.Polygon({paths:coords,strokeColor:defColor[d].Out,strokeOpacity:0.9,strokeWeight:1,fillColor:n?defColor[d].Sel:defColor[d].Blk,fillOpacity:0.5,marks:l.marks[k]});n&&init&&$(coords).each(function(s,z){fitBd.extend(z)});d=="US"&&params.State==h.marks[0]?h.setMap(null):h.setMap(map);G.event.addListener(h,"mousemove",boundEvt("mousemove",d));G.event.addListener(h,"mouseover",boundEvt("mouseover",d));G.event.addListener(h,"mouseout",boundEvt("mouseout",d));G.event.addListener(h,
"click",boundEvt("click",d));bounds[d].push(h)}if(d=="CD"&&init){map.fitBounds(fitBd);GoPan(true)}if(d=="CD"&&bounds.US!=null&&init==false){for(k=0;k<bounds.US.length;k++)params.State==bounds.US[k].marks[0]&&bounds.US[k].setMap(null);map.getZoom()==4&&map.setZoom(5);GoPan(false)}init=false})}}
function boundEvt(d,l){return function(){params=$.data($("#map")[0],"params");StCD=params.State+"-"+params.CD;if(d=="mouseover"||d=="mousemove"){cSel=l=="CD"?this.marks.join("|"):this.marks[0];html=(l=="CD"?"Congressional District: "+this.marks[0]+"-"+this.marks[1]:this.marks[1])+"<hr/>";if(hoverStats==null)html+="Loading statistics...";else{if(params.table=="pat"||params.table=="app")html=html+"Total Patents: "+hoverStats[l][cSel]+"<br/>";if((params.agency=="NIH"||params.agency=="")&&$.inArray("NIH|"+
cSel,$.keys(hoverStats[l]))!=-1)html=html+"NIH funded: "+hoverStats[l]["NIH|"+cSel]+"<br/>";if((params.agency=="NSF"||params.agency=="")&&$.inArray("NSF|"+cSel,$.keys(hoverStats[l]))!=-1)html=html+"NSF funded: "+hoverStats[l]["NSF|"+cSel]+"<br/>"}mapToolTip(html);if(d=="mousemove")return}else mapToolTip("");if(d=="click")if(l=="CD"){if(!$.browser.msie)for(k=0;k<bounds[l].length;k++)bounds[l][k].marks.join("-")==StCD&&this.marks.join("-")!=StCD&&bounds[l][k].setOptions({fillColor:defColor[l].Blk,fillOpacity:0.5});
setVal({CD:parseInt(this.marks[1]),State:this.marks[0],Org:null,Label:null})}else if(l=="US"){GoPan(false);if(bounds.CD!=null){for(k=0;k<bounds.CD.length;k++)bounds.CD[k].setMap(null);bounds.CD=null}setVal({CD:"0",State:this.marks[0],Org:null,Label:null})}if(this.marks.join("-")!=StCD)if(!$.browser.msie)for(var k=0;k<bounds[l].length;k++)if(this.marks[1]==bounds[l][k].marks[1])if(d=="mouseover")bounds[l][k].setOptions({fillColor:defColor[l].Sel,fillOpacity:0.3});else if(d=="mouseout")bounds[l][k].setOptions({fillColor:defColor[l].Blk,
fillOpacity:0.5});else d=="click"&&l=="CD"&&bounds[l][k].setOptions({fillColor:defColor[l].Sel,fillOpacity:0.5});else if(l=="US"&&d=="click"&&bounds[l][k].getMap()==null){bounds[l][k].setOptions({fillColor:defColor[l].Blk,fillOpacity:0.5});bounds[l][k].setMap(map)}}}
function refreshGeo(){params=$.data($("#map")[0],"params");refresher(params);$(".floater").remove();$("#map").append($("<div></div>").addClass("floater").html("Loading..."));$.ajax({url:"api/nodes",data:params,dataType:"json",success:function(d){$.data($("#map")[0],"latlng",null);dataB=d;refreshMapGeo("x");$(".floater").remove()},error:function(){$(".floater").remove();$("#sectOrg div").detach();$("#sectLabel div").detach();$("#sectOrg").append($("<div>Drill down to State level to see detail.</div>"));
$("#sectLabel").append($("<div>Drill down to State level to see detail.</div>"))}})}
function refreshMapGeo(){markerClusterer!=null&&markerClusterer.clearMarkers();var d=[],l=[];params=$.data($("#map")[0],"params");toggle=params.Org!=null?["x","Label"]:["x","Org"];if(dataB!=null){for(var k=0;k<dataB.marks.cnt.length;++k){var q=new G.LatLng(dataB.marks.Lat[k],dataB.marks.Lng[k]);q=new G.Marker({position:q,idx:k,toggle:toggle});d.push(q);path=[];edges=false;q=new G.Polyline({path:path,strokeColor:"#cccccc",strokeOpacity:0.5,strokeWeight:1});l.push(q)}if(params.Org==null&&params.Label==
null)sideAttrs("");else{params.Org!=null&&sideAttrs("Org");params.Label!=null&&sideAttrs("Label")}markerClusterer=new MarkerClusterer(map,d,l,{maxZoom:20,gridSize:dataB.marks.cnt.length>500?25:15})}};var lMod,legendModel,mapToolTip,sideAttrs;legendModel=function(){function d(){}d.prototype.OrgList=ko.observableArray([]);d.prototype.LabelList=ko.observableArray([]);return d}();lMod=new legendModel;ko.applyBindings(lMod);mapToolTip=function(d){if(d==null)d="";if(d==="")return $("#mapToolTip").css("display","none");else if(typeof mousey!="undefined"&&mousey!==null)return $("#mapToolTip").html(d).css("top",mousey.pageY+25).css("left",mousey.pageX-5).css("display","block")};
sideAttrs=function(d){var l,k,q,n,h,s,z,B,F,J;if(d==null)d="";q=function(M){var A,L,Q,D,S;D=_.keys(k);S=[];L=0;for(Q=D.length;L<Q;L++){A=D[L];S.push(k[A].add(dataB.marks[A][M]))}return S};z=$.data($("#map")[0],"latlng");switch(d){case "":k={Label:new dict,Org:new dict};break;case "Label":k={Org:new dict};break;case "Org":k={Label:new dict}}l=true;if(z!=null)if(z.markers.length>0)l=false;l?$(dataB.marks.cnt).each(function(M){return q(M)}):$(z.markers).each(function(M,A){return q(A)});F=_.keys(k);J=
[];l=0;for(z=F.length;l<z;l++){d=F[l];B=[];if(params[d]==null)params[d]=[];J.push(function(){var M,A;if(params[d].length===0){k[d].sort();n=0;for(M=_.min([99,k[d].ranked.length-1]);0<=M?n<=M:n>=M;0<=M?n+=1:n-=1){h=k[d].ranked[n][0];if(dataB.colors[""+h+"|"+d]!=null&&h!==""){s=dataB.colors[""+h+"|"+d][1];B.push({type:d,key:h,label:h===""?"Unattributed":s,label_ex:d==="Label"&&h!==""?(A=params.table)==="pat"||A==="app"?" (USPTO Class# "+h+")":"":void 0})}}return $("#sect"+d).html($("#navclicky").tmpl(B))}}())}return J};
$("div.list a").live("click",function(d){var l,k;$(this).toggleClass("sel");k=$(this).attr("type");l=$.data($("#map")[0],"params");l.Org=[];l.Label=[];$.each($(this).parent().children(".sel"),function(){return l[k].push($(this).attr("key"))});setVal({});return d.preventDefault()});function MarkerClusterer(d,l,k,q){this.extend(MarkerClusterer,google.maps.OverlayView);this.map_=d;this.markers_=[];this.lines_=[];this.clusters_=[];this.sizes=[53,56,66,78,90];this.styles_=[];this.ready_=false;q=q||{};this.gridSize_=q.gridSize||60;this.maxZoom_=q.maxZoom||null;this.styles_=q.styles||[];this.imagePath_=q.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_;this.imageExtension_=q.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_;this.zoomOnClick_=true;if(q.zoomOnClick!=undefined)this.zoomOnClick_=
q.zoomOnClick;this.averageCenter_=false;if(q.averageCenter!=undefined)this.averageCenter_=q.averageCenter;this.setupStyles_();this.setMap(d);this.prevZoom_=this.map_.getZoom();var n=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var h=n.map_.mapTypes[n.map_.getMapTypeId()].maxZoom,s=n.map_.getZoom();if(!(s<0||s>h))if(n.prevZoom_!=s){n.prevZoom_=n.map_.getZoom();n.resetViewport()}});google.maps.event.addListener(this.map_,"idle",function(){n.redraw()});l&&l.length&&this.addMarkers(l,
k,false)}MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m";MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png";MarkerClusterer.prototype.extend=function(d,l){return function(k){for(property in k.prototype)this.prototype[property]=k.prototype[property];return this}.apply(d,[l])};MarkerClusterer.prototype.onAdd=function(){this.setReady_(true)};MarkerClusterer.prototype.draw=function(){};
MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var d=0,l;l=this.sizes[d];d++)this.styles_.push({url:this.imagePath_+(d+1)+"."+this.imageExtension_,height:l,width:l})};MarkerClusterer.prototype.setStyles=function(d){this.styles_=d};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_};
MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_};MarkerClusterer.prototype.setMaxZoom=function(d){this.maxZoom_=d};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_||this.map_.mapTypes[this.map_.getMapTypeId()].maxZoom};MarkerClusterer.prototype.calculator_=function(d,l){for(var k=0,q=d.length,n=q;n!==0;){n=parseInt(n/10,10);k++}k=Math.min(k,l);return{text:q,index:k}};
MarkerClusterer.prototype.setCalculator=function(d){this.calculator_=d};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.addMarkers=function(d,l,k){for(var q=0,n;n=d[q];q++){line=l[q];this.pushMarkerTo_(n,line)}k||this.redraw()};
MarkerClusterer.prototype.pushMarkerTo_=function(d,l){d.setVisible(false);d.setMap(null);l.setMap(null);d.isAdded=false;if(d.draggable){var k=this;google.maps.event.addListener(d,"dragend",function(){d.isAdded=false;k.resetViewport();k.redraw()})}this.markers_.push(d);this.lines_.push(l)};MarkerClusterer.prototype.addMarker=function(d,l){this.pushMarkerTo_(d);l||this.redraw()};
MarkerClusterer.prototype.removeMarker=function(d){var l=-1;if(this.markers_.indexOf)l=this.markers_.indexOf(d);else for(var k=0,q;q=this.markers_[k];k++)if(q==d)l=k;if(l==-1)return false;this.markers_.splice(l,1);d.setVisible(false);d.setMap(null);this.resetViewport();this.redraw();return true};MarkerClusterer.prototype.setReady_=function(d){if(!this.ready_){this.ready_=d;this.createClusters_()}};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};
MarkerClusterer.prototype.getMap=function(){return this.map_};MarkerClusterer.prototype.setMap=function(d){this.map_=d};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(d){this.gridSize_=d};
MarkerClusterer.prototype.getExtendedBounds=function(d){var l=this.getProjection(),k=new google.maps.LatLng(d.getNorthEast().lat(),d.getNorthEast().lng()),q=new google.maps.LatLng(d.getSouthWest().lat(),d.getSouthWest().lng());k=l.fromLatLngToDivPixel(k);k.x+=this.gridSize_;k.y-=this.gridSize_;q=l.fromLatLngToDivPixel(q);q.x-=this.gridSize_;q.y+=this.gridSize_;k=l.fromDivPixelToLatLng(k);l=l.fromDivPixelToLatLng(q);d.extend(k);d.extend(l);return d};
MarkerClusterer.prototype.isMarkerInBounds_=function(d,l){return l.contains(d.getPosition())};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport();this.markers_=[];this.lines_=[]};MarkerClusterer.prototype.resetViewport=function(){for(var d=0,l;l=this.clusters_[d];d++)l.remove();for(d=0;l=this.markers_[d];d++){line=this.lines_[d];l.isAdded=false;l.setMap(null);line.setMap(null);l.setVisible(false)}this.clusters_=[]};MarkerClusterer.prototype.redraw=function(){this.createClusters_()};
MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var d=this.getExtendedBounds(new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast())),l=0,k;k=this.markers_[l];l++){line=this.lines_[l];var q=false;if(!k.isAdded&&this.isMarkerInBounds_(k,d)){for(var n=0,h;h=this.clusters_[n];n++)if(!q&&h.getCenter()&&h.isMarkerInClusterBounds(k)){q=true;h.addMarker(k,line);break}if(!q){h=new Cluster(this);h.addMarker(k,line);this.clusters_.push(h)}}}};
function Cluster(d){this.markerClusterer_=d;this.map_=d.getMap();this.gridSize_=d.getGridSize();this.averageCenter_=d.isAverageCenter();this.center_=null;this.markers_=[];this.lines_=[];this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,d)}Cluster.prototype.isMarkerAlreadyAdded=function(d){if(this.markers_.indexOf)return this.markers_.indexOf(d)!=-1;else for(var l=0,k;k=this.markers_[l];l++)if(k==d)return true;return false};
Cluster.prototype.addMarker=function(d){if(this.isMarkerAlreadyAdded(d))return false;if(this.center_){if(this.averageCenter_){var l=(this.center_.lat()+d.getPosition().lat())/2,k=(this.center_.lng()+d.getPosition().lng())/2;this.center_=new google.maps.LatLng(l,k);this.calculateBounds_()}}else{this.center_=d.getPosition();this.calculateBounds_()}d.isAdded=true;this.markers_.push(d);this.updateIcon();return true};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};
Cluster.prototype.getBounds=function(){this.calculateBounds_();return this.bounds_};Cluster.prototype.remove=function(){this.clusterIcon_.remove();this.markers_.length=0;delete this.markers_};Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};
Cluster.prototype.calculateBounds_=function(){this.bounds_=this.markerClusterer_.getExtendedBounds(new google.maps.LatLngBounds(this.center_,this.center_))};Cluster.prototype.isMarkerInClusterBounds=function(d){return this.bounds_.contains(d.getPosition())};Cluster.prototype.getMap=function(){return this.map_};
Cluster.prototype.updateIcon=function(){var d=this.map_.getZoom(),l=this.markerClusterer_.getMaxZoom();if(d>l)for(d=0;l=this.markers_[d];d++){l.setMap(this.map_);l.setVisible(true)}else if(this.markers_.length<1)this.clusterIcon_.hide();else{d=this.markerClusterer_.getStyles().length;d=this.markerClusterer_.getCalculator()(this.markers_,d);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.setSums(d);this.clusterIcon_.show()}};
function ClusterIcon(d,l){d.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.markerClusterer_=l;this.styles_=l.getStyles();this.padding_=l.getGridSize()||0;this.cluster_=d;this.center_=null;this.map_=d.getMap();this.sums_=this.div_=null;this.visible_=false;this.setMap(this.map_)}
ClusterIcon.prototype.triggerClusterClick=function(){ctrl===false&&$(this.markerClusterer_.clusters_).each(function(){$(this.clusterIcon_.div_).removeClass("mapCircleSelected")});$(this.div_).toggleClass("mapCircleSelected");sel=$(this.div_).hasClass("mapCircleSelected");val=$.data($("#map")[0],"params");latlng=$.data($("#map")[0],"latlng");if(latlng===null||ctrl===false)latlng={coords:[],markers:[]};var d=new dict;$(this.cluster_.markers_).each(function(){d.add(dataB.marks.City[this.idx]+"~"+dataB.marks.cnt[this.idx]);
var l=this.position.lat(),k=this.position.lng();if(sel){latlng.markers.push(this.idx);latlng.coords.push([l,k])}else{pos=$.inArray(this.idx,latlng.markers);latlng.markers.splice(pos,1);latlng.coords.splice(pos,1)}});d.sort();$.data($("#map")[0],"latlng",latlng);latlng.coords.length==0?createDataTable({}):createDataTable({coords:latlng.coords,mode2:"latlng"});sideAttrs("");$.browser.msie&&refreshMapGeo(latlng.markers)};
ClusterIcon.prototype.onAdd=function(){this.div_=document.createElement("DIV");if(this.visible_){this.div_.style.cssText=this.createCss();if(!$.browser.msie){$(this.div_).addClass("mapCircle");this.sel_&&$(this.div_).addClass("mapCircleSelected")}}this.getPanes().overlayImage.appendChild(this.div_);var d=this;G.event.addDomListener(this.div_,"click",function(){d.triggerClusterClick()});G.event.addDomListener(this.div_,"mousemove",function(){mapToolTip(d.tooltip_)});G.event.addDomListener(this.div_,
"mouseout",function(){mapToolTip("")})};ClusterIcon.prototype.getPosFromLatLng_=function(d){d=this.getProjection().fromLatLngToDivPixel(d);d.x-=parseInt(this.width_/2,10);d.y-=parseInt(this.height_/2,10);return d};ClusterIcon.prototype.draw=function(){if(this.visible_){var d=this.getPosFromLatLng_(this.center_);$(this.div).css("top",d.y+"px");$(this.div).css("left",d.x+"px")}};ClusterIcon.prototype.hide=function(){if(this.div_)this.div_.style.display="none";this.visible_=false};
ClusterIcon.prototype.show=function(){if(this.div_){this.div_.style.cssText=this.createCss();if(!$.browser.msie){$(this.div_).addClass("mapCircle");this.sel_&&$(this.div_).addClass("mapCircleSelected")}this.div_.style.display=""}this.visible_=true};ClusterIcon.prototype.remove=function(){this.setMap(null)};
ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();this.div_.parentNode.removeChild(this.div_);this.div_=null}if(this.div2_&&this.div2_.parentNode){this.div2_.parentNode.removeChild(this.div2_);this.div2_=null}};ClusterIcon.prototype.setSums=function(d){this.sums_=d;this.text_=d.text;this.index_=d.index;if(this.div_)this.div_.innerHTML="";this.useStyle()};
ClusterIcon.prototype.useStyle=function(){var d=Math.max(0,this.sums_.index-1);d=Math.min(this.styles_.length-1,d);d=this.styles_[d];this.url_=d.url;this.height_=d.height;this.width_=d.width;this.textColor_=d.textColor;this.anchor=d.anchor;this.textSize_=d.textSize};ClusterIcon.prototype.setCenter=function(d){this.center_=d};colorMode=2;
ClusterIcon.prototype.createCss=function(){var d=[];sel_=aBool=false;params=$.data($("#map")[0],"params");latlng=$.data($("#map")[0],"latlng");if(latlng==null)latlng={coords:[],markers:[]};var l=new dict,k=new dict;totCnt=0;cnt={NIH:0,NSF:0};amt={NIH:0,NSF:0};$(this.cluster_.markers_).each(function(){totCnt+=dataB.marks.cnt[this.idx];if(params.table=="grant"&&dataB.marks.amt[this.idx]!="")try{agency=dataB.marks.Agency[this.idx].split("~")[0];cnt[agency]+=parseInt(dataB.marks.cnt[this.idx]);amt[agency]+=
parseInt(dataB.marks.amt[this.idx])}catch(n){x=0}aBool=this.alpha?true:aBool;org_=this.toggle;l.add(dataB.marks[org_[1]][this.idx]);k.add(dataB.marks.City[this.idx]+"~"+dataB.marks.cnt[this.idx]);if(latlng!=null)sel_=$.inArray(this.idx,latlng.markers)!=-1||sel_});l.sort();k.sort();this.sel_=sel_;this.tooltip_=k.ranked[0][0];if(k.ranked.length>1)for(i=1;i<3&&i<k.ranked.length;++i)this.tooltip_=this.tooltip_+", "+k.ranked[i][0];if(k.ranked.length>3)this.tooltip_=this.tooltip_+"<br/> &nbsp; and "+(k.ranked.length-
3)+" neighboring areas (zoom for detail).";this.tooltip_+="<br/>";if(params.table=="pat")this.tooltip_=this.tooltip_+"Patents: "+addCommas(totCnt)+"<table>";else if(params.table=="app")this.tooltip_=this.tooltip_+"Patent Applications: "+addCommas(totCnt)+"<table>";else{if((params.agency=="NIH"||params.agency=="")&&cnt.NIH>0)this.tooltip_=this.tooltip_+"NIH: "+addCommas(cnt.NIH)+" ($"+addCommas(amt.NIH)+")<br/>";if((params.agency=="NSF"||params.agency=="")&&cnt.NSF>0)this.tooltip_=this.tooltip_+"NSF: "+
addCommas(cnt.NSF)+" ($"+addCommas(amt.NSF)+")<br/>";this.tooltip_+="<table>"}maxed=false;topTool="";colorKeys=$.keys(dataB.colors);for(i=0;i<5&&i<l.ranked.length;++i){curr=l.ranked[i];bold=false;Name=null;if($.inArray(curr[0]+"|"+org_[1],colorKeys))if(dataB.colors[curr[0]+"|"+org_[1]]!=null)Name=dataB.colors[curr[0]+"|"+org_[1]][1];if(Name=="")Name=null;if(Name!==null){counter=curr[1];maxed=true;topTool=topTool+"<tr><td>"+Name+"</td><td></td></tr>"}}if(topTool!="")this.tooltip_=params.table=="pat"||
params.table=="app"?this.tooltip_+"<caption>Top "+(org_[1]=="Label"?"Technologies":"Organizations")+":</caption>"+topTool:this.tooltip_+"<caption>Top "+(org_[1]=="Label"?"Topics":"Institutions")+":</caption>"+topTool;this.tooltip_+="</table>";dim=Math.min(48,Math.round(15+2*Math.log(totCnt)));if(colorMode==0)url="img/circle.png?d="+dim+"&c1="+colors[0].substring(1)+"&c2="+colors[1].substring(1);else if(colorMode==1){dim=10;dim2=Math.min(100,Math.round(25+8*Math.log(totCnt)));url="img/circle.png?d=10&c1=0000A0"+
dim2+"&c2=0000A0"+dim2}else if(colorMode==2){dim=Math.min(48,Math.round(5+2*Math.log(totCnt)));dim=Math.min(48,Math.round(10+0.01*totCnt));dim=Math.min(32,Math.round(8+0.01*totCnt));url=sel_?"img/circle.png?d="+dim+"&c1=ff9b0895&c2=00000000":"img/circle.png?d="+dim+"&c1=00000080&c2=00000000"}this.width_=this.height_=dim;var q=this.getPosFromLatLng_(this.center_);if($.browser.msie)d.push(document.all?'filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="'+url+'");':"background:url("+
url+"); background-repeat:no-repeat;");if(typeof this.anchor_==="object"){typeof this.anchor_[0]==="number"&&this.anchor_[0]>0&&this.anchor_[0]<dim?d.push("height:"+(dim-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):d.push("height:"+dim+"px; line-height:"+dim+"px;");typeof this.anchor_[1]==="number"&&this.anchor_[1]>0&&this.anchor_[1]<dim?d.push("width:"+(dim-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):d.push("width:"+dim+"px; text-align:center;")}else d.push("height:"+
dim+"px; line-height:"+dim+"px; width:"+dim+"px; text-align:center;");d.push("cursor:pointer; top:"+q.y+"px; left:"+q.x+"px; color:"+(this.textColor_?this.textColor_:"black")+"; position:absolute; font-size:"+(this.textSize_?this.textSize_:11)+"px; font-family:Arial,sans-serif; font-weight:bold");return d.join("")};window.MarkerClusterer=MarkerClusterer;MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker;MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers;
MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers;MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator;MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize;MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap;MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers;MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom;MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles;
MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters;MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers;MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw;MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker;MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport;MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator;
MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize;MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd;MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw;Cluster.prototype.getCenter=Cluster.prototype.getCenter;Cluster.prototype.getSize=Cluster.prototype.getSize;Cluster.prototype.getMarkers=Cluster.prototype.getMarkers;ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd;ClusterIcon.prototype.draw=ClusterIcon.prototype.draw;
ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove;(function(d){var l,k,q,n,h,s,z,B,F,J,M=0,A={},L=[],Q=0,D={},S=[],ia=null,fa=new Image,w=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,V=/[^\.]\.(swf)\s*$/i,U,ga=1,ja=0,ba="",da,ca,o=false,u=d.extend(d("<div/>")[0],{prop:0}),E=d.browser.msie&&d.browser.version<7&&!window.XMLHttpRequest,H=function(){k.hide();fa.onerror=fa.onload=null;ia&&ia.abort();l.empty()},O=function(){if(false===A.onError(L,M,A)){k.hide();o=false}else{A.titleShow=false;A.width="auto";A.height="auto";l.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');
Z()}},R=function(){var C=L[M],I,aa,Y,ra,ta,ma;H();A=d.extend({},d.fn.fancybox.defaults,typeof d(C).data("fancybox")=="undefined"?A:d(C).data("fancybox"));ma=A.onStart(L,M,A);if(ma===false)o=false;else{if(typeof ma=="object")A=d.extend(A,ma);Y=A.title||(C.nodeName?d(C).attr("title"):C.title)||"";if(C.nodeName&&!A.orig)A.orig=d(C).children("img:first").length?d(C).children("img:first"):d(C);if(Y===""&&A.orig&&A.titleFromAlt)Y=A.orig.attr("alt");I=A.href||(C.nodeName?d(C).attr("href"):C.href)||null;
if(/^(?:javascript)/i.test(I)||I=="#")I=null;if(A.type){aa=A.type;if(!I)I=A.content}else if(A.content)aa="html";else if(I)aa=I.match(w)?"image":I.match(V)?"swf":d(C).hasClass("iframe")?"iframe":I.indexOf("#")===0?"inline":"ajax";if(aa){if(aa=="inline"){C=I.substr(I.indexOf("#"));aa=d(C).length>0?"inline":"ajax"}A.type=aa;A.href=I;A.title=Y;if(A.autoDimensions)if(A.type=="html"||A.type=="inline"||A.type=="ajax"){A.width="auto";A.height="auto"}else A.autoDimensions=false;if(A.modal){A.overlayShow=true;
A.hideOnOverlayClick=false;A.hideOnContentClick=false;A.enableEscapeButton=false;A.showCloseButton=false}A.padding=parseInt(A.padding,10);A.margin=parseInt(A.margin,10);l.css("padding",A.padding+A.margin);d(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){d(this).replaceWith(s.children())});switch(aa){case "html":l.html(A.content);Z();break;case "inline":if(d(C).parent().is("#fancybox-content")===true){o=false;break}d('<div class="fancybox-inline-tmp" />').hide().insertBefore(d(C)).bind("fancybox-cleanup",
function(){d(this).replaceWith(s.children())}).bind("fancybox-cancel",function(){d(this).replaceWith(l.children())});d(C).appendTo(l);Z();break;case "image":o=false;d.fancybox.showActivity();fa=new Image;fa.onerror=function(){O()};fa.onload=function(){o=true;fa.onerror=fa.onload=null;A.width=fa.width;A.height=fa.height;d("<img />").attr({id:"fancybox-img",src:fa.src,alt:A.title}).appendTo(l);sa()};fa.src=I;break;case "swf":A.scrolling="no";ra='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+
A.width+'" height="'+A.height+'"><param name="movie" value="'+I+'"></param>';ta="";d.each(A.swf,function(oa,va){ra+='<param name="'+oa+'" value="'+va+'"></param>';ta+=" "+oa+'="'+va+'"'});ra+='<embed src="'+I+'" type="application/x-shockwave-flash" width="'+A.width+'" height="'+A.height+'"'+ta+"></embed></object>";l.html(ra);Z();break;case "ajax":o=false;d.fancybox.showActivity();A.ajax.win=A.ajax.success;ia=d.ajax(d.extend({},A.ajax,{url:I,data:A.ajax.data||{},error:function(oa){oa.status>0&&O()},
success:function(oa,va,W){if((typeof W=="object"?W:ia).status==200){if(typeof A.ajax.win=="function"){ma=A.ajax.win(I,oa,va,W);if(ma===false){k.hide();return}else if(typeof ma=="string"||typeof ma=="object")oa=ma}l.html(oa);Z()}}}));break;case "iframe":sa()}}else O()}},Z=function(){var C=A.width,I=A.height;C=C.toString().indexOf("%")>-1?parseInt((d(window).width()-A.margin*2)*parseFloat(C)/100,10)+"px":C=="auto"?"auto":C+"px";I=I.toString().indexOf("%")>-1?parseInt((d(window).height()-A.margin*2)*
parseFloat(I)/100,10)+"px":I=="auto"?"auto":I+"px";l.wrapInner('<div style="width:'+C+";height:"+I+";overflow: "+(A.scrolling=="auto"?"auto":A.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>');A.width=l.width();A.height=l.height();sa()},sa=function(){var C,I;k.hide();if(n.is(":visible")&&false===D.onCleanup(S,Q,D)){d.event.trigger("fancybox-cancel");o=false}else{o=true;d(s.add(q)).unbind();d(window).unbind("resize.fb scroll.fb");d(document).unbind("keydown.fb");n.is(":visible")&&
D.titlePosition!=="outside"&&n.css("height",n.height());S=L;Q=M;D=A;if(D.overlayShow){q.css({"background-color":D.overlayColor,opacity:D.overlayOpacity,cursor:D.hideOnOverlayClick?"pointer":"auto",height:d(document).height()});if(!q.is(":visible")){E&&d("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});q.show()}}else q.hide();ca=Da();ba=D.title||"";ja=0;B.empty().removeAttr("style").removeClass();
if(D.titleShow!==false){if(d.isFunction(D.titleFormat))C=D.titleFormat(ba,S,Q,D);else C=ba&&ba.length?D.titlePosition=="float"?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+ba+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+D.titlePosition+'">'+ba+"</div>":false;ba=C;if(!(!ba||ba==="")){B.addClass("fancybox-title-"+D.titlePosition).html(ba).appendTo("body").show();
switch(D.titlePosition){case "inside":B.css({width:ca.width-D.padding*2,marginLeft:D.padding,marginRight:D.padding});ja=B.outerHeight(true);B.appendTo(h);ca.height+=ja;break;case "over":B.css({marginLeft:D.padding,width:ca.width-D.padding*2,bottom:D.padding}).appendTo(h);break;case "float":B.css("left",parseInt((B.width()-ca.width-40)/2,10)*-1).appendTo(n);break;default:B.css({width:ca.width-D.padding*2,paddingLeft:D.padding,paddingRight:D.padding}).appendTo(n)}}}B.hide();if(n.is(":visible")){d(z.add(F).add(J)).hide();
C=n.position();da={top:C.top,left:C.left,width:n.width(),height:n.height()};I=da.width==ca.width&&da.height==ca.height;s.fadeTo(D.changeFade,0.3,function(){var aa=function(){s.html(l.contents()).fadeTo(D.changeFade,1,xa)};d.event.trigger("fancybox-change");s.empty().removeAttr("filter").css({"border-width":D.padding,width:ca.width-D.padding*2,height:A.autoDimensions?"auto":ca.height-ja-D.padding*2});if(I)aa();else{u.prop=0;d(u).animate({prop:1},{duration:D.changeSpeed,easing:D.easingChange,step:ya,
complete:aa})}})}else{n.removeAttr("style");s.css("border-width",D.padding);if(D.transitionIn=="elastic"){da=na();s.html(l.contents());n.show();if(D.opacity)ca.opacity=0;u.prop=0;d(u).animate({prop:1},{duration:D.speedIn,easing:D.easingIn,step:ya,complete:xa})}else{D.titlePosition=="inside"&&ja>0&&B.show();s.css({width:ca.width-D.padding*2,height:A.autoDimensions?"auto":ca.height-ja-D.padding*2}).html(l.contents());n.css(ca).fadeIn(D.transitionIn=="none"?0:D.speedIn,xa)}}}},Aa=function(){if(D.enableEscapeButton||
D.enableKeyboardNav)d(document).bind("keydown.fb",function(C){if(C.keyCode==27&&D.enableEscapeButton){C.preventDefault();d.fancybox.close()}else if((C.keyCode==37||C.keyCode==39)&&D.enableKeyboardNav&&C.target.tagName!=="INPUT"&&C.target.tagName!=="TEXTAREA"&&C.target.tagName!=="SELECT"){C.preventDefault();d.fancybox[C.keyCode==37?"prev":"next"]()}});if(D.showNavArrows){if(D.cyclic&&S.length>1||Q!==0)F.show();if(D.cyclic&&S.length>1||Q!=S.length-1)J.show()}else{F.hide();J.hide()}},xa=function(){if(!d.support.opacity){s.get(0).style.removeAttribute("filter");
n.get(0).style.removeAttribute("filter")}A.autoDimensions&&s.css("height","auto");n.css("height","auto");ba&&ba.length&&B.show();D.showCloseButton&&z.show();Aa();D.hideOnContentClick&&s.bind("click",d.fancybox.close);D.hideOnOverlayClick&&q.bind("click",d.fancybox.close);d(window).bind("resize.fb",d.fancybox.resize);D.centerOnScroll&&d(window).bind("scroll.fb",d.fancybox.center);if(D.type=="iframe")d('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+
(d.browser.msie?'allowtransparency="true""':"")+' scrolling="'+A.scrolling+'" src="'+D.href+'"></iframe>').appendTo(s);n.show();o=false;d.fancybox.center();D.onComplete(S,Q,D);var C,I;if(S.length-1>Q){C=S[Q+1].href;if(typeof C!=="undefined"&&C.match(w)){I=new Image;I.src=C}}if(Q>0){C=S[Q-1].href;if(typeof C!=="undefined"&&C.match(w)){I=new Image;I.src=C}}},ya=function(C){var I={width:parseInt(da.width+(ca.width-da.width)*C,10),height:parseInt(da.height+(ca.height-da.height)*C,10),top:parseInt(da.top+
(ca.top-da.top)*C,10),left:parseInt(da.left+(ca.left-da.left)*C,10)};if(typeof ca.opacity!=="undefined")I.opacity=C<0.5?0.5:C;n.css(I);s.css({width:I.width-D.padding*2,height:I.height-ja*C-D.padding*2})},wa=function(){return[d(window).width()-D.margin*2,d(window).height()-D.margin*2,d(document).scrollLeft()+D.margin,d(document).scrollTop()+D.margin]},Da=function(){var C=wa(),I={},aa=D.autoScale,Y=D.padding*2;I.width=D.width.toString().indexOf("%")>-1?parseInt(C[0]*parseFloat(D.width)/100,10):D.width+
Y;I.height=D.height.toString().indexOf("%")>-1?parseInt(C[1]*parseFloat(D.height)/100,10):D.height+Y;if(aa&&(I.width>C[0]||I.height>C[1]))if(A.type=="image"||A.type=="swf"){aa=D.width/D.height;if(I.width>C[0]){I.width=C[0];I.height=parseInt((I.width-Y)/aa+Y,10)}if(I.height>C[1]){I.height=C[1];I.width=parseInt((I.height-Y)*aa+Y,10)}}else{I.width=Math.min(I.width,C[0]);I.height=Math.min(I.height,C[1])}I.top=parseInt(Math.max(C[3]-20,C[3]+(C[1]-I.height-40)*0.5),10);I.left=parseInt(Math.max(C[2]-20,
C[2]+(C[0]-I.width-40)*0.5),10);return I},na=function(){var C=A.orig?d(A.orig):false,I={};if(C&&C.length){I=C.offset();I.top+=parseInt(C.css("paddingTop"),10)||0;I.left+=parseInt(C.css("paddingLeft"),10)||0;I.top+=parseInt(C.css("border-top-width"),10)||0;I.left+=parseInt(C.css("border-left-width"),10)||0;I.width=C.width();I.height=C.height();I={width:I.width+D.padding*2,height:I.height+D.padding*2,top:I.top-D.padding-20,left:I.left-D.padding-20}}else{C=wa();I={width:D.padding*2,height:D.padding*
2,top:parseInt(C[3]+C[1]*0.5,10),left:parseInt(C[2]+C[0]*0.5,10)}}return I},Ba=function(){if(k.is(":visible")){d("div",k).css("top",ga*-40+"px");ga=(ga+1)%12}else clearInterval(U)};d.fn.fancybox=function(C){if(!d(this).length)return this;d(this).data("fancybox",d.extend({},C,d.metadata?d(this).metadata():{})).unbind("click.fb").bind("click.fb",function(I){I.preventDefault();if(!o){o=true;d(this).blur();L=[];M=0;I=d(this).attr("rel")||"";if(!I||I==""||I==="nofollow")L.push(this);else{L=d("a[rel="+
I+"], area[rel="+I+"]");M=L.index(this)}R()}});return this};d.fancybox=function(C,I){var aa;if(!o){o=true;aa=typeof I!=="undefined"?I:{};L=[];M=parseInt(aa.index,10)||0;if(d.isArray(C)){for(var Y=0,ra=C.length;Y<ra;Y++)if(typeof C[Y]=="object")d(C[Y]).data("fancybox",d.extend({},aa,C[Y]));else C[Y]=d({}).data("fancybox",d.extend({content:C[Y]},aa));L=jQuery.merge(L,C)}else{if(typeof C=="object")d(C).data("fancybox",d.extend({},aa,C));else C=d({}).data("fancybox",d.extend({content:C},aa));L.push(C)}if(M>
L.length||M<0)M=0;R()}};d.fancybox.showActivity=function(){clearInterval(U);k.show();U=setInterval(Ba,66)};d.fancybox.hideActivity=function(){k.hide()};d.fancybox.next=function(){return d.fancybox.pos(Q+1)};d.fancybox.prev=function(){return d.fancybox.pos(Q-1)};d.fancybox.pos=function(C){if(!o){C=parseInt(C);L=S;if(C>-1&&C<S.length){M=C;R()}else if(D.cyclic&&S.length>1){M=C>=S.length?0:S.length-1;R()}}};d.fancybox.cancel=function(){if(!o){o=true;d.event.trigger("fancybox-cancel");H();A.onCancel(L,
M,A);o=false}};d.fancybox.close=function(){function C(){q.fadeOut("fast");B.empty().hide();n.hide();d.event.trigger("fancybox-cleanup");s.empty();D.onClosed(S,Q,D);S=A=[];Q=M=0;D=A={};o=false}if(!(o||n.is(":hidden"))){o=true;if(D&&false===D.onCleanup(S,Q,D))o=false;else{H();d(z.add(F).add(J)).hide();d(s.add(q)).unbind();d(window).unbind("resize.fb scroll.fb");d(document).unbind("keydown.fb");s.find("iframe").attr("src",E&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");
D.titlePosition!=="inside"&&B.empty();n.stop();if(D.transitionOut=="elastic"){da=na();var I=n.position();ca={top:I.top,left:I.left,width:n.width(),height:n.height()};if(D.opacity)ca.opacity=1;B.empty().hide();u.prop=1;d(u).animate({prop:0},{duration:D.speedOut,easing:D.easingOut,step:ya,complete:C})}else n.fadeOut(D.transitionOut=="none"?0:D.speedOut,C)}}};d.fancybox.resize=function(){q.is(":visible")&&q.css("height",d(document).height());d.fancybox.center(true)};d.fancybox.center=function(C){var I,
aa;if(!o){aa=C===true?1:0;I=wa();!aa&&(n.width()>I[0]||n.height()>I[1])||n.stop().animate({top:parseInt(Math.max(I[3]-20,I[3]+(I[1]-s.height()-40)*0.5-D.padding)),left:parseInt(Math.max(I[2]-20,I[2]+(I[0]-s.width()-40)*0.5-D.padding))},typeof C=="number"?C:200)}};d.fancybox.init=function(){if(!d("#fancybox-wrap").length){d("body").append(l=d('<div id="fancybox-tmp"></div>'),k=d('<div id="fancybox-loading"><div></div></div>'),q=d('<div id="fancybox-overlay"></div>'),n=d('<div id="fancybox-wrap"></div>'));
h=d('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(n);h.append(s=d('<div id="fancybox-content"></div>'),
z=d('<a id="fancybox-close"></a>'),B=d('<div id="fancybox-title"></div>'),F=d('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),J=d('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));z.click(d.fancybox.close);k.click(d.fancybox.cancel);F.click(function(C){C.preventDefault();d.fancybox.prev()});J.click(function(C){C.preventDefault();d.fancybox.next()});d.fn.mousewheel&&n.bind("mousewheel.fb",
function(C,I){if(o)C.preventDefault();else if(d(C.target).get(0).clientHeight==0||d(C.target).get(0).scrollHeight===d(C.target).get(0).clientHeight){C.preventDefault();d.fancybox[I>0?"prev":"next"]()}});d.support.opacity||n.addClass("fancybox-ie");if(E){k.addClass("fancybox-ie6");n.addClass("fancybox-ie6");d('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(h)}}};
d.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",
easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};d(document).ready(function(){d.fancybox.init()})})(jQuery);
